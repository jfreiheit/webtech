


<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Lehrmaterial, Übungen, Aufgaben und Hilfen für WebTech">
      
      
        <link rel="canonical" href="http://freiheit.f4.htw-berlin.de/webtech/backendanbindung/">
      
      
        <meta name="author" content="Jörn Freiheit">
      
      <link rel="shortcut icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.1">
    
    
      
        <title>Frontend-Backend-Anbindung - WebTech</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a676eddb.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.b302131d.min.css">
      
      
        
        
        <meta name="theme-color" content="#757575">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    <body dir="" data-md-color-primary="grey" data-md-color-accent="indigo">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#anbindung-an-das-backend" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="">
    <a href="http://freiheit.f4.htw-berlin.de/webtech" title="WebTech" class="md-header-nav__button md-logo" aria-label="WebTech">
      
  <img src="../img/fiw.jpg" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            WebTech
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Frontend-Backend-Anbindung
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suchbegriff eingeben
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/jfreiheit/webtech/" title="Quellcode" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    webtech
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

<nav class="md-tabs" aria-label="" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link md-tabs__link--active">
        Home
      </a>
    
  </li>

      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="http://freiheit.f4.htw-berlin.de/webtech" title="WebTech" class="md-nav__button md-logo" aria-label="WebTech">
      
  <img src="../img/fiw.jpg" alt="logo">

    </a>
    WebTech
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/jfreiheit/webtech/" title="Quellcode" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    webtech
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../uebungen/" title="Übungen" class="md-nav__link">
      Übungen
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../tools/" title="Werkzeuge" class="md-nav__link">
      Werkzeuge
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../html/" title="HTML" class="md-nav__link">
      HTML
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../css/" title="CSS" class="md-nav__link">
      CSS
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../rwd/" title="RWD" class="md-nav__link">
      RWD
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../javascript/" title="JavaScript" class="md-nav__link">
      JavaScript
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../json/" title="JSON" class="md-nav__link">
      JSON
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../angular/" title="Angular" class="md-nav__link">
      Angular
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../material/" title="Material" class="md-nav__link">
      Material
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../backend/" title="REST-API" class="md-nav__link">
      REST-API
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Frontend-Backend-Anbindung
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="Frontend-Backend-Anbindung" class="md-nav__link md-nav__link--active">
      Frontend-Backend-Anbindung
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#komponenten" class="md-nav__link">
    Komponenten
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routing" class="md-nav__link">
    Routing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interpolation" class="md-nav__link">
    Interpolation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-fur-http" class="md-nav__link">
    Service für HTTP
  </a>
  
    <nav class="md-nav" aria-label="Service für HTTP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#datenmodell" class="md-nav__link">
    Datenmodell
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-funktion-von-httpclient" class="md-nav__link">
    get()-Funktion von HttpClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subscribe" class="md-nav__link">
    subscribe()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-starten" class="md-nav__link">
    Backend starten
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frontend-starten" class="md-nav__link">
    Frontend starten
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#readcomponenthtml" class="md-nav__link">
    read.component.html
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bootstrap-einbinden" class="md-nav__link">
    Bootstrap einbinden
  </a>
  
    <nav class="md-nav" aria-label="Bootstrap einbinden">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bootstrap-icons" class="md-nav__link">
    Bootstrap Icons
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tabelle-statt-liste" class="md-nav__link">
    Tabelle statt Liste
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametrisierte-route-in-readcomponentts" class="md-nav__link">
    Parametrisierte Route in read.component.ts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ngif-in-readcomponenthtml" class="md-nav__link">
    *ngIf in read.component.html
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r-read-one-zb-get-members11" class="md-nav__link">
    R - read one (z.B. 'GET /members/11')
  </a>
  
    <nav class="md-nav" aria-label="R - read one (z.B. 'GET /members/11')">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#safe-navigation-operator" class="md-nav__link">
    Safe navigation operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-datensatz-existiert-nicht" class="md-nav__link">
    Error - Datensatz existiert nicht
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formular-fur-einen-datensatz" class="md-nav__link">
    Formular für einen Datensatz
  </a>
  
    <nav class="md-nav" aria-label="Formular für einen Datensatz">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#einbinden-der-formcomponent-in-die-readcomponent" class="md-nav__link">
    Einbinden der FormComponent in die ReadComponent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datenfluss-von-eltern-nach-kindkomponente" class="md-nav__link">
    Datenfluss von Eltern- nach Kindkomponente
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ereignisse-zum-formular-hinzufugen" class="md-nav__link">
    Ereignisse zum Formular hinzufügen
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#u-update" class="md-nav__link">
    U - update
  </a>
  
    <nav class="md-nav" aria-label="U - update">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#datenfluss-von-kind-nach-elternkomponente" class="md-nav__link">
    Datenfluss von Kind- nach Elternkomponente
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#d-delete-one" class="md-nav__link">
    D - delete one
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../node/" title="Node.js" class="md-nav__link">
      Node.js
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../books/" title="Bücher-App" class="md-nav__link">
      Bücher-App
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../books-backend/" title="Bücher-Backend" class="md-nav__link">
      Bücher-Backend
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#komponenten" class="md-nav__link">
    Komponenten
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routing" class="md-nav__link">
    Routing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interpolation" class="md-nav__link">
    Interpolation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-fur-http" class="md-nav__link">
    Service für HTTP
  </a>
  
    <nav class="md-nav" aria-label="Service für HTTP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#datenmodell" class="md-nav__link">
    Datenmodell
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-funktion-von-httpclient" class="md-nav__link">
    get()-Funktion von HttpClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subscribe" class="md-nav__link">
    subscribe()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-starten" class="md-nav__link">
    Backend starten
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frontend-starten" class="md-nav__link">
    Frontend starten
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#readcomponenthtml" class="md-nav__link">
    read.component.html
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bootstrap-einbinden" class="md-nav__link">
    Bootstrap einbinden
  </a>
  
    <nav class="md-nav" aria-label="Bootstrap einbinden">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bootstrap-icons" class="md-nav__link">
    Bootstrap Icons
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tabelle-statt-liste" class="md-nav__link">
    Tabelle statt Liste
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parametrisierte-route-in-readcomponentts" class="md-nav__link">
    Parametrisierte Route in read.component.ts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ngif-in-readcomponenthtml" class="md-nav__link">
    *ngIf in read.component.html
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r-read-one-zb-get-members11" class="md-nav__link">
    R - read one (z.B. 'GET /members/11')
  </a>
  
    <nav class="md-nav" aria-label="R - read one (z.B. 'GET /members/11')">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#safe-navigation-operator" class="md-nav__link">
    Safe navigation operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-datensatz-existiert-nicht" class="md-nav__link">
    Error - Datensatz existiert nicht
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formular-fur-einen-datensatz" class="md-nav__link">
    Formular für einen Datensatz
  </a>
  
    <nav class="md-nav" aria-label="Formular für einen Datensatz">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#einbinden-der-formcomponent-in-die-readcomponent" class="md-nav__link">
    Einbinden der FormComponent in die ReadComponent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datenfluss-von-eltern-nach-kindkomponente" class="md-nav__link">
    Datenfluss von Eltern- nach Kindkomponente
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ereignisse-zum-formular-hinzufugen" class="md-nav__link">
    Ereignisse zum Formular hinzufügen
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#u-update" class="md-nav__link">
    U - update
  </a>
  
    <nav class="md-nav" aria-label="U - update">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#datenfluss-von-kind-nach-elternkomponente" class="md-nav__link">
    Datenfluss von Kind- nach Elternkomponente
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#d-delete-one" class="md-nav__link">
    D - delete one
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/jfreiheit/webtech/edit/master/docs/backendanbindung.md" title="Seite editieren" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>
                  </a>
                
                
                  
                
                
                <h1 id="anbindung-an-das-backend">Anbindung an das Backend<a class="headerlink" href="#anbindung-an-das-backend" title="Permanent link">&para;</a></h1>
<p>Wir haben jetzt ein Backend, das als REST-Server funngiert. Über die Endpunkte der REST-API können wir auf die einzelnen Funktionen des Backends zugreifen, um die Daten in der MySQL-Datenbank zu manipulieren (erzeugen, lesen, ändern und löschen - CRUD). Unser Frontend stellt zur Zeit nur einen Daten-Service zur Verfügung, der die Daten client-seitig verwaltet. Dies wollen wir jetzt ändern. Das Frontend soll mit dem Backend kommunizieren, um die Daten zu nutzen, die das Backend zur Verfügung stellt. </p>
<p>Wir werden uns ein neues Frontend erstellen und dabei die einzelnen Schritte genauer untersuchen. Das hat folgende Vorteile:</p>
<ul>
<li>wir werden sicherer bei der Erstellung von Frontends mithilfe von Angular,</li>
<li>wir müssen nicht auf bestehende Frontends aufsetzen, die evtl. bei einigen nicht richtig funktionieren,</li>
<li>wir haben die Möglichkeit, tiefer in die Prinzipien von Angular einzutauchen und wesentliche Prinzipien ausführlicher zu diskutieren. </li>
</ul>
<p>Ich werde das Frontend, das ich hier erstelle, <code>frontend3</code> nennen. Der Name bleibt natürlich Ihnen überlassen. Wir erstellen uns also neben unserem alten Frontend, neben dem Backend usw. in unserem Repository mithilfe von </p>
<div class="highlight"><pre><span></span><code>ng new frontend3
</code></pre></div>

<p>ein neues Angular-Projekt und wählen <strong>nicht</strong> die strikte Typüberprüfung, <strong>aber</strong> Routing und CSS.</p>
<h2 id="komponenten">Komponenten<a class="headerlink" href="#komponenten" title="Permanent link">&para;</a></h2>
<p>Eine Angular-Anwendung besteht hauptsächlich aus Komponenten. Wann immer Sie eine neue "Unterseite" erstellen möchten oder sogar nur ein Menü, eine einzelne Tabelle o.ä., erstellen Sie sich eine neue Komponente. Jede Komponente besteht aus:</p>
<ul>
<li>einem HTML-<em>Template</em>, in dem mittels HTML bestimmt wird, was im Browser dargestellt werden soll (<code>*.component.html</code>), </li>
<li>einer TypeScript-Klasse, in der das <em>Verhalten</em> auf der Seite definiert werden kann (<code>*.component.ts</code>),</li>
<li>einem CSS-Selektor, mit dem bestimmt werden kann, wie die die Komponente in die Webseite eingebunden werden kann (z.B. <code>&lt;app-root&gt;&lt;/app-root&gt;</code>),</li>
<li>einer CSS-Datei, in der eigene Styles für die Komponente definiert werden können (<code>*.component.css</code>) und</li>
<li>einer Datei, in der Tests speizifiziert werden können (<code>*.component.spec.ts</code>)</li>
</ul>
<p>Die Erstellung von Komponenten erfolgt am einfachsten über das Terminal:</p>
<div class="highlight"><pre><span></span><code>ng generate component nameDerKomponente
ng g c nameDerKomponente
</code></pre></div>

<p>Wir erstellen uns 4 Komponenten in unserer Anwendung:</p>
<div class="highlight"><pre><span></span><code>ng g c members/create
ng g c members/read
ng g c members/update
ng g c members/delete
</code></pre></div>

<p>Diese 4 Komponenten <code>CreateComponent</code>, <code>ReadComponent</code>, <code>UpdateComponent</code> und <code>DeleteComponent</code> entstehen im Ordner <code>members</code>, der durch die erste Anweisung im <code>src/app</code>-Ordner erstellt wird. </p>
<p>Man könnte die Komponenten nun mithilfe ihrer Selektoren (z.B. <code>&lt;app-create&gt;&lt;/app-create&gt;</code>) in die Seite einbinden. Wir wählen jedoch gleich das <em>Routing</em>, um die jeweiligen Komponenten anzusprechen. </p>
<h2 id="routing">Routing<a class="headerlink" href="#routing" title="Permanent link">&para;</a></h2>
<p>In der <code>app-routing.module.ts</code> können wir <em>Routen</em> definieren, so dass wir unsere Komponenten über die URLs direkt erreichen können, z.B. <code>localhost:4200/read</code>, um z.B. alle Datensätze auszulesen oder <code>localhost:4200/read/11</code>, um den Datensatz mit der <code>id=11</code> auszulesen. Werden für die Komponenten Routen definiert, so wird je nach Route die jeweilige Komponente in den Selktor <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code> eingesetzt. </p>
<p>Wir definieren unserer Routen wie folgt:</p>
<div class="tabbed-set" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">src/app/app-routing.module.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Routes</span><span class="p">,</span> <span class="nx">RouterModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">CreateComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./members/create/create.component&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">UpdateComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./members/update/update.component&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">ReadComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./members/read/read.component&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">DeleteComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./members/delete/delete.component&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">routes</span><span class="o">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="nx">component</span><span class="o">:</span> <span class="nx">CreateComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="nx">component</span><span class="o">:</span> <span class="nx">UpdateComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;update/:id&#39;</span><span class="p">,</span> <span class="nx">component</span><span class="o">:</span> <span class="nx">UpdateComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;read&#39;</span><span class="p">,</span> <span class="nx">component</span><span class="o">:</span> <span class="nx">ReadComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;read/:id&#39;</span><span class="p">,</span> <span class="nx">component</span><span class="o">:</span> <span class="nx">ReadComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;delete&#39;</span><span class="p">,</span> <span class="nx">component</span><span class="o">:</span> <span class="nx">DeleteComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;delete/:id&#39;</span><span class="p">,</span> <span class="nx">component</span><span class="o">:</span> <span class="nx">DeleteComponent</span> <span class="p">},</span>
<span class="p">];</span>

<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span>
  <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span><span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">routes</span><span class="p">)],</span>
  <span class="nx">exports</span><span class="o">:</span> <span class="p">[</span><span class="nx">RouterModule</span><span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppRoutingModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div>

</div>
</div>
<p>Die Routen werden im <code>routes</code>-Array festgelegt. Bei Angabe der Komponenten, die über die jeweilige Route erreichbar sein soll, wird diese durch eine <code>import</code>-Anweisung importiert. Das Importieren sollten Sie durch Ihre IDE erledigen lassen. </p>
<p>Wichtig ist, dass die entsprechenden Links zu den Routen (und damit Komponenten) nicht über das Attribut <code>href</code> im HTML definiert werden, sondern über <code>[routerLink]</code>. Die Verwendung von <code>href</code> führt zu einem neuen Request auf dem Webserver. Die <code>app.component.html</code> sollte z.B. so aussehen:</p>
<div class="tabbed-set" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">src/app/app.component.html</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>This is app<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">create</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Create<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">read</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Read<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">update</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Update<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">delete</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Delete<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">router-outlet</span><span class="p">&gt;&lt;/</span><span class="nt">router-outlet</span><span class="p">&gt;</span>
</code></pre></div>

</div>
</div>
<p>In der <code>app.component.html</code> haben wir uns somit eine Liste erstellt und die einzelnen List-items sind Hyperlinks auf unsere Komponenten. Diese erreichen wir über die zuvor festgelegten Routen. Klicken wir nun auf einen Link, so wird die jeweilige Komponente in den <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code>-Selektor unterhalb der Liste eingebunden. Nun erscheint die Liste von Links und wenn auf einen der Links geklickt wird, dann wird die entsprechende Komponente in den <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code>-Selektor eingebunden. Da jedes der <code>*.component.html</code> ein <code>&lt;p&gt;</code><em>component</em><code>works!&lt;/p&gt;</code> enthält, erscheint dieses dann unterhalb der Liste, so wie hier das Beispiel für die <code>UpdateComponent</code>:</p>
<p><img alt="frontend" src="../files/100_frontend.png" /></p>
<p>Um Parameter aus den Routen auszulesen, z.B. die <code>id</code> aus <code>localhost:4200/update/11</code>, binden wir für genau dieses Beispiel (<code>UpdateComponent</code>) in die <code>update.component.ts</code> die Klasse <code>ActivatedRoute</code> ein und greifen dann darüber auf <code>snapshot.paramMap.get('id'))</code> zu. Die Datei sieht wie folgt aus:</p>
<div class="tabbed-set" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">src/app/members/update.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-update&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./update.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./update.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">UpdateComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">selectedId</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">route</span><span class="o">:</span> <span class="nx">ActivatedRoute</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">));</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>In Zeile <code>12</code> binden wir <code>ActivatedRoute</code> per <em>dependency injection</em> (siehe z.B. <a href="https://angular.io/guide/dependency-injection#dependency-injection-in-angular">hier</a>) in den Konstruktor ein. Die Eigenschaft <code>route</code> ist damit in der Klasse <code>UpdateComponent</code> verfügbar. Durch dieses Einbinden wird die Klasse <code>ActiveRoute</code> auch importiert (in Zeile <code>2</code>). In Zeile <code>10</code> wird eine Eigenschaft <code>selectedId</code> deklariert, die den Typ <code>number</code> hat. Dieser Eigenschaft wird in Zeile <code>15</code> ein Wert zugewiesen, der aus der URL ausgelesen wird. Da wir unsere Rout ein <code>app-routing.module.ts</code> mittels <code>{ path: 'update/:id', component: UpdateComponent },</code> parametrisiert hatten, kann nun über die <code>ActivatedRoute</code>-Klasse (hier bei handelt es sich genauer um einen <em>Service</em> - siehe z.B. <a href="https://angular.io/guide/router#activated-route">hier</a>) der Wert von <code>id</code> ausgelesen werden. Dieser ist ein <code>string</code>, den wir mittels <code>Number</code> nach <code>number</code> konvertieren. </p>
<p>Bei der <code>ngOnInit()</code>-Funktion handelt es sich um einen sogenannten <em>lifecycle-hook</em>. Jede Komponente durchläuft einen <em>Lifecycle</em>. Wir können einerseits auf Ereignisse durch die Nutzerin reagieren und andererseits auf Ereignisse, die durch den <em>Lifecycle</em>  einer Komponente ausgelöst werden. Bei <code>ngOnInit()</code> reagieren wir darauf, dass die Komponente initialisiert wird. Diese Funktion wird genau ein Mal aufgerufen (bei der Initialisierung der Komponente) - im Gegensatz z.B. zu <code>ngOnChanges()</code>. Diese Funktion wird bei jeder Änderung der Komponente aufgerufen, z.B. direkt vor <code>ngOnInit()</code>. Sie z.B. <a href="https://angular.io/guide/lifecycle-hooks#hooking-into-the-component-lifecycle">hier</a>.</p>
<h2 id="interpolation">Interpolation<a class="headerlink" href="#interpolation" title="Permanent link">&para;</a></h2>
<p>Mithilfe von <em>Interpolation</em> können wir (berechnete) Werte in unser HTML einfügen. Die Syntax von Interpolation sieht in Angular so aus:</p>
<blockquote>
<p><code>{{ wert }}</code></p>
</blockquote>
<p>Der Wert wird also in doppelten geschweiften Klammern angegeben. Wir betrachten für unsere obige <code>UpdateComponent</code> ein einfaches Beispiel. In <code>update.component.ts</code> haben wir die Eigenschaft <code>selectedId</code> erstellt und dieser mithilfe der parametrisierten Route einen Wert zugewiesen. Diesen Wert können wir nun in <code>update.component.html</code> durch Interpolation einbinden:</p>
<div class="tabbed-set" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><label for="__tabbed_4_1">src/app/members/update.component.html</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>update works!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>id={{ selectedId }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Wenn wir also die <code>update</code>-Komponente über z.B. die URL <code>localhost:4200/update/11</code> aufrufen, erscheint unterhalb des Absatzes <code>update works!</code> ein Absatz mit <code>id=11</code>.</p>
<h2 id="service-fur-http">Service für HTTP<a class="headerlink" href="#service-fur-http" title="Permanent link">&para;</a></h2>
<p>Ehe wir weitere Sprachkonzepte in Angular betrachten, erzeugen wir uns einen <em>Service</em>, um mit dem Backend per HTTP zu kommunizieren. Ein Service in Angular ist eine (TypeScript-)Klasse, die einem konkreten Zweck dient. Ein Service sollte möglichst genau eine Sache erledigen. Ein Service kann typischerweise von allen/vielen Komponenten verwendet werden. Wir erstellen unseren Service deswegen in einem Ordner <code>shared</code>. Wir nennen unseren Service <code>backend</code>:</p>
<div class="highlight"><pre><span></span><code>ng g service shared/backend
</code></pre></div>

<p>Durch die Anweisung wird der <code>shared</code>-Ordner erstellt und darin eine <code>backend.service.ts</code>. Ein Service besteht nur aus einer <code>*.service.ts</code>-Datei (und einer <code>spec.ts</code> für Tests). Es gibt dafür keine <code>.html</code> und keine <code>.css</code>-Datei, da ein Service nur ein Verhalten beschreibt und keine Sicht. </p>
<p>Als erstes fügen wir unserer <code>app.module.ts</code> das Modul <code>HttpClientModule</code> hinzu, um es zu importieren. Achten Sie darauf, dass das <code>HttpClientModule</code> in der Liste der Importe <strong>nach</strong> dem <code>BrowserModule</code> steht:</p>
<div class="tabbed-set" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><label for="__tabbed_5_1">src/app/app.module.ts (Ausschnitt)</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cm">/* gekuerzt */</span>
<span class="hll"><span class="kr">import</span> <span class="p">{</span> <span class="nx">HttpClientModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
</span>
<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span>
  <span class="nx">declarations</span><span class="o">:</span> <span class="p">[</span>  <span class="cm">/* gekuerzt */</span> <span class="p">],</span>
  <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">BrowserModule</span><span class="p">,</span>
    <span class="nx">AppRoutingModule</span><span class="p">,</span>
<span class="hll">    <span class="nx">HttpClientModule</span><span class="p">,</span>
</span>  <span class="p">],</span>
  <span class="nx">providers</span><span class="o">:</span> <span class="p">[],</span>
  <span class="nx">bootstrap</span><span class="o">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Nun implementieren wir unseren <code>BackendService</code>. Wir fügen zunächst den <code>HttpClient</code>-Service per * dependency injection*  hinzu:</p>
<div class="tabbed-set" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><label for="__tabbed_6_1">src/app/shared/backend.service.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="hll"><span class="kr">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
</span>
<span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span>
  <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">ConnService</span> <span class="p">{</span>

<span class="hll">  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">http</span><span class="o">:</span> <span class="nx">HttpClient</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</span><span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Mit dem <code>HttpClient</code>-Service sind wir in der Lage, Anfragen (<em>requests</em>) an das Backend zu senden und die Antworten (<em>responses</em>) zu empfangen und auszuwerten. Wir erinnern uns zunächst nochmal an die Endpunkte unserer <a href="../backend/#rest-api">REST-API</a>:</p>
<table>
<thead>
<tr>
<th> Methode</th>
<th> URL</th>
<th> Bedeutung</th>
</tr>
</thead>
<tbody>
<tr>
<td> GET</td>
<td> /members</td>
<td> hole alle Datensätze</td>
</tr>
<tr>
<td> GET</td>
<td> /members/11</td>
<td>hole den Datensatz mit der id=11</td>
</tr>
<tr>
<td> POST</td>
<td> /members</td>
<td> füge einen neuen Datensatz hinzu</td>
</tr>
<tr>
<td> PUT</td>
<td> /members/11</td>
<td> ändere den Datensatz mit der id=11</td>
</tr>
<tr>
<td> DELETE</td>
<td> /members/11</td>
<td> lösche den Datensatz mit der id=11</td>
</tr>
<tr>
<td> DELETE</td>
<td> /members</td>
<td> lösche alle Datensätze</td>
</tr>
</tbody>
</table>
<p>Wir beginnen damit, den <code>GET</code>-request für alle <code>members</code> auszuführen. Dazu erstellen wir uns zunächst im Client ein Interface für das Datenmodell:</p>
<h3 id="datenmodell">Datenmodell<a class="headerlink" href="#datenmodell" title="Permanent link">&para;</a></h3>
<p>Wir hatten uns früher bereits ein Datenmodell im Client erstellt. Wir wiederholen das hier nochmal schnell. Um das Mapping des Datenmodells von Backend und Frontend zunächst einfach zu halten, übernehmen wir das Datenmodell des Backends. Das Datenmodell in Angular ist ein <em>Interface</em>. Wir erstellen es ebenfalls im <code>shared</code>-Ordner:</p>
<div class="highlight"><pre><span></span><code>ng generate interface shared/data 
</code></pre></div>

<p>Anstelle von <code>ng generate interface</code> hätten wir auch <code>ng g i</code> schreiben können. Unser Datenmodell sieht wie folgt aus:</p>
<div class="tabbed-set" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><label for="__tabbed_7_1">src/app/data.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">Data</span> <span class="p">{</span>
  <span class="nx">id</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>
  <span class="nx">firstname</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">lastname</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">email</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

</div>
</div>
<p>Mit einem <em>Interface</em> legen wir in TypeScript einen neuen Typ an, hier den Typ <code>Data</code>. Interfaces dienen somit der Typsicherheit. Wir werden diesen Typ <code>Data</code> im folgenden verwenden, um die Datensätze unserer <em>Mockup-Data</em> zu typisieren. Interfaces können in TypeScript Eigenschaften und Funktionen enthalten. Für die Beschreibung unserer Daten benötigen wir nur Eigenschaften. Ein Objekt kann jetzt vom Typ <code>Data</code> sein. Ein Interface hat aber keinen Konstruktor. </p>
<h3 id="get-funktion-von-httpclient"><code>get()</code>-Funktion von <code>HttpClient</code><a class="headerlink" href="#get-funktion-von-httpclient" title="Permanent link">&para;</a></h3>
<p>Wir erstellen nun die erste "Verknüpfung" mit dem Backend und implementieren ein <code>GET</code>-Request an das Backend, um alle <code>members</code> abzufragen. Dazu verwenden wir die <code>get()</code>-Funktion des <code>HttpClient</code>-Services. </p>
<p>Die einfachste Form der Anwendung der <code>get()</code>-Funktion besteht darin, dieser Funktion die entsprechende URL des Backends zu übergeben. In unserem Fall also </p>
<div class="highlight"><pre><span></span><code><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://localhost:3000/members&#39;</span><span class="p">);</span>
</code></pre></div>

<p>Diese Funktion gibt ein sogenanntes <em>Observable</em> zurück. <em>Observables</em> implementieren das <em>Observer Pattern</em> - ein Design Pattern zur Kommunikation zwischen einem sogenannte <em>subject</em>, das einen oder mehrere <em>observers</em> beobachtet und das immer dann informiert wird, sobald sich der Zustand eines <em>observers</em> geändert hat. Eine typische Implementierung des <em>Observer Patterns</em> findet durch Ereignis-Listener statt. Jemand (das <em>subject</em>) meldet sich an einem <em>observer</em> an, z.B. einem Button (genauer gesagt, an das Click-Ereignis des Buttons) und wird informiert, sobald der Button gecklickt wurde. </p>
<p>Die Grundidee bei <em>Observables</em> in TypeScript ist die, dass es eine Funktion gibt, die Werte ermittelt (z.B. <code>http.get()</code>), aber diese Funktion nur ausgeführt wird, wenn sie jemand <code>subscribe</code>d. <code>subscribe()</code> ist also wie eine Anmeldung an den zu beobachtenden Wert. </p>
<p>Wir schauen uns dieses Prinzip mal mit der <code>get()</code>-Funktion des <code>HttpClient</code>s an:</p>
<div class="tabbed-set" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><label for="__tabbed_8_1">src/app/shared/backend.service.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Data</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./data&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span>
  <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">BackendService</span> <span class="p">{</span>
<span class="hll">  <span class="nx">baseUrl</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:3000/members&#39;</span><span class="p">;</span>
</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">http</span><span class="o">:</span> <span class="nx">HttpClient</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">getAll</span><span class="p">()</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Data</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">{</span>
<span class="hll">    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Data</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">);</span>
</span>  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Zunächst einmal sehen wir in Zeile <code>15</code> den Aufruf der <code>get()</code>-Funktion von <code>HttpClient</code>. Der <code>get()</code>-Funktion wird als Parameter die URL des Backends übergeben. Diese ist in der Eigenschaft <code>baseUrl</code> in Zeile <code>10</code> definiert. </p>
<p>Die Rückgabe der <code>get()</code>-Funktion ist, wie gesagt, ein <code>Observable</code>. Wir erzeugen den Aufruf der <code>get()</code>-Funktion in einer von uns erstellten Funktion <code>getAll()</code>deren Rückgabetyp dieses <code>Obervable</code> ist (Zeile <code>14</code>). Dieses <code>Observable</code> ist sogar typisiert, nämlich mit unserem Datenmodell-Typ <code>Data</code>. Vielmehr bekommen wir ein Array von <code>Data</code>-Objekten zurück, deshalb <code>Observable&lt;Data[]&gt;</code> als Rückgabetyp der <code>getAll()</code>-Funktion. Da wir diesen Rückgabetyp so konkret angeben (und nicht einfach nur <code>Observable</code> oder <code>Observable&lt;any&gt;</code>, erfordert TypeScript auch, dass wir die <code>get()</code>-Funktion typisieren - deshalb <code>get&lt;Data[]&gt;()</code>.</p>
<p>Wir müssen sowohl <code>Observable</code> (aus <code>rxjs</code>) als auch <code>Data</code> (aus unserer <code>data.ts</code>) importieren (Zeilen <code>3</code> und <code>4</code>). Nun müssen wir uns noch an dieses <code>Observable</code> mittels <code>subscribe()</code> anmelden. Das machen wir in unserer <code>ReadComponent</code>.</p>
<h3 id="subscribe"><code>subscribe()</code><a class="headerlink" href="#subscribe" title="Permanent link">&para;</a></h3>
<p>In unserer <code>ReadComponent</code> wollen wir die <code>getAll()</code>-Funktion unseres Backend-Services nutzen, um uns alle <code>members</code>-Datensätze vom Backend anbzufragen und anzeigen zu lassen. Wir öffnen dazu die <code>read.component.ts</code>:</p>
<div class="tabbed-set" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><label for="__tabbed_9_1">src/app/members/read.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">BackendService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../shared/backend.service&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Data</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../shared/data&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-read&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./read.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./read.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">ReadComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">members</span><span class="o">:</span> <span class="nx">Data</span><span class="p">[];</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">cs</span><span class="o">:</span> <span class="nx">BackendService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">readAll</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">readAll</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">cs</span><span class="p">.</span><span class="nx">getAll</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
</span><span class="hll">            <span class="p">(</span><span class="nx">response</span><span class="o">:</span> <span class="nx">Data</span><span class="p">[])</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">members</span> <span class="o">=</span> <span class="nx">response</span>
</span><span class="hll">    <span class="p">);</span>
</span>  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Zunächst binden wir den <code>BackendService</code> mittels <em>dependency injection</em> in unsere Komponente ein (Zeile <code>13</code>). In einer eigenen Funktion <code>readAll()</code> rufen wir nun die <code>getAll()</code>-Funktion des <code>BackendService</code> auf (Zeile <code>20</code>). Wie in dem Abschnitt zuvor erläutert, wird diese Funktion nur durch ein <code>subscribe()</code> ausgeführt. Die <code>subscribe()</code>-Funktion "holt" das <code>Observer</code>-Objekt, welches drei sogenannte <em>callback</em>-Funktionen definiert: <code>next</code>, <code>error</code> und <code>complete</code>. <a href="../javascript/#callback-funktionen">Callback-Funktionen</a> sind <a href="../javascript/#callback-funktionen">hier</a> erläutert. Wir haben also drei Parameter in der <code>subscribe()</code>-Funktion, von denen jedoch nur einer (<code>next</code>) erforderlich ist. <code>error</code> und <code>complete</code> sind optional. Wir verwenden hier auch nur <code>next</code>. </p>
<p>Unter <code>next</code> erhalten wir die <code>response</code> zurück, also das angefragte Objekt. Wir verwenden dafür eine <em>Arrow-Funktion</em> (siehe <a href="../javascript/#arrow-funktionen">Arrow-Funktionen</a>). Wie wir diese Funktion nennen, bleibt uns überlassen. Hier heißt sie <code>response</code>. Wir haben diese Funktion auch mit <code>Data[]</code> typisiert, da sie uns ein <code>Data</code>-Array zurückgibt. Der Inhalt dieser Funktion ist die Zuweisung der <code>response</code> auf unsere Eigenschaft <code>members</code> vom Typ <code>Data[]</code> (definiert in Zeile <code>11</code>) und der Rückgabe der <code>response</code> (in Arrow-Funktionen kann aber auf das <code>return</code> verzichtet werden - siehe <a href="../javascript/#arrow-funktionen">hier</a>). </p>
<p>Hier vielleicht einmal zum Verständnis auch die Möglichkeit der Fehlerausgabe auf der Konsole:</p>
<div class="highlight"><pre><span></span><code>    <span class="k">this</span><span class="p">.</span><span class="nx">cs</span><span class="p">.</span><span class="nx">getAll</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span><span class="nx">response</span><span class="o">:</span> <span class="nx">Data</span><span class="p">[])</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">members</span> <span class="o">=</span> <span class="nx">response</span><span class="p">,</span>
      <span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
    <span class="p">);</span>
</code></pre></div>

<p>Damit wir testen können, ob unsere Backend-Anbindung funktioniert, fügen wir noch eine Konsolen-Ausgabe der <code>response</code> ein. Die Funktionskörper der <code>readAll()</code>-Funktion sieht dann so aus: </p>
<div class="highlight"><pre><span></span><code>    <span class="k">this</span><span class="p">.</span><span class="nx">cs</span><span class="p">.</span><span class="nx">getAll</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span><span class="nx">response</span><span class="o">:</span> <span class="nx">Data</span><span class="p">[])</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">members</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>  <span class="p">},</span>
      <span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
    <span class="p">);</span>
</code></pre></div>

<h3 id="backend-starten">Backend starten<a class="headerlink" href="#backend-starten" title="Permanent link">&para;</a></h3>
<p>Um die Anbindung an das Backend zu testen, dürfen wir nicht vergessen, es zu starten! Wechseln Sie im Terminal in Ihren Backend-Ordner und rufen dort</p>
<div class="highlight"><pre><span></span><code>node server.js 
</code></pre></div>

<p>auf. Es erscheint im Terminal</p>
<div class="highlight"><pre><span></span><code>Server is running on port <span class="m">3000</span>.
Successfully connected to the database.
</code></pre></div>

<h3 id="frontend-starten">Frontend starten<a class="headerlink" href="#frontend-starten" title="Permanent link">&para;</a></h3>
<p>Wir müssen unser Frontend compilieren <code>ng serve</code> und wenn wir dann im Browser <code>http://localhost:4200/read</code> eingeben, also die Route zu unserer <code>ReadComponent</code>, dann sollten wir in der Konsole die Ausgabe der Response sehen (die <code>id</code>s und auch die Anzahl der Einträge können bei Ihnen anders sein):</p>
<p><img alt="konsole" src="../files/101_konsole.png" /></p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>Wir haben das Backend an das Frontend angebunden. Wir haben die erste Anfrage an das Backend im Frontend umgesetzt, nämlich <code>GET /members</code>, indem wir im Frontend die <code>get()</code>-Funktion des <code>HttpClient</code> implementiert und diese in der <code>ReadComponent</code>mittels <code>subscribe()</code> ausgeführt haben. Wir werden nun zunächst die Daten noch im HTML-Template darstellen und dann weitere Endpunkte unserer REST-API anbinden. </p>
</div>
<h3 id="readcomponenthtml"><code>read.component.html</code><a class="headerlink" href="#readcomponenthtml" title="Permanent link">&para;</a></h3>
<p>Die Werte der <em>Response</em> wollen wir nun in unserem HTML-Template der <code>ReadComponent</code> darstellen. Nach Aufruf der <code>ReadComponent</code> über die <code>/read</code>-Route befinden sich die Werte in der Eigenschaft <code>members</code> vom Typ <code>Data[]</code>. Dieses Array lesen wir nun aus. Für das Auslesen von Arrays bieten sich in Angular <a href="https://angular.io/guide/structural-directives">Struktur-Direktiven</a> an, hier insbesondere die <em>Wiederholungsdirektive</em> <code>*ngFor</code>:</p>
<div class="tabbed-set" data-tabs="10:1"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><label for="__tabbed_10_1">src/app/members/read.component.html</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>read works!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">ul</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot;let member of members&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>{{member.firstname}} {{member.lastname}}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>In Zeile <code>3</code> verwenden wir diese Direktive. Wir greifen auf <code>members</code> zu und laufen vollständig durch dieses Array. Dazu definieren wir uns eine Variable <code>member</code> (die können Sie nennen, wie Sie möchten). <code>member</code> zeigt dann jeweils auf einen Datensatz. Jeder Datensatz ist ein Objekt mit den Eigenschaften <code>id</code>, <code>firstname</code>, <code>lastname</code> und <code>email</code>. Mittels <em>Interpolation</em>  lesen wir die Werte von <code>member.firstname</code> und <code>member.lastname</code> aus und stellen sie in einer Liste dar. </p>
<h3 id="bootstrap-einbinden">Bootstrap einbinden<a class="headerlink" href="#bootstrap-einbinden" title="Permanent link">&para;</a></h3>
<p>Wir können dieses Mal ja Bootstrap in unser Angular-Frontend einbinden. Dazu gehen wir wie folgt vor. Wir wechseln im Terminal in unseren Frontend-Ordner und geben dort</p>
<div class="highlight"><pre><span></span><code>npm install bootstrap jquery popper.js --save
</code></pre></div>

<p>ein. Würden wir nur <code>npm install bootstrap</code> eingeben, würden wir aufgefordert, <code>jquery</code> (siehe <a href="https://jquery.com/">jQuery</a>) und <code>popper.js</code> (siehe <a href="https://popper.js.org/">Popper</a>) nachzuinstallieren. </p>
<p>In dem <code>node_modules</code>-Ordner in unserem Projekt entstehen die Ordner <code>bootstrap</code>, <code>jquery</code> und <code>popper.js</code> - können Sie sich in Ihrer IDE ja mal anschauen. Damit ist Bootstrap aber noch nicht ganz eingebunden. Wir müssen es noch in unsere <code>angular.json</code> eintragen:</p>
<div class="tabbed-set" data-tabs="11:1"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><label for="__tabbed_11_1">angular.json (Ausschnitt)</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>        <span class="err">],</span>
        <span class="s2">&quot;styles&quot;</span><span class="err">:</span> <span class="p">[</span>
          <span class="s2">&quot;src/styles.css&quot;</span><span class="p">,</span>
<span class="hll">          <span class="s2">&quot;./node_modules/bootstrap/dist/css/bootstrap.min.css&quot;</span>
</span>        <span class="p">]</span><span class="err">,</span>
        <span class="s2">&quot;scripts&quot;</span><span class="err">:</span> <span class="p">[</span>
<span class="hll">          <span class="s2">&quot;./node_modules/jquery/dist/jquery.min.js&quot;</span><span class="p">,</span>
</span><span class="hll">          <span class="s2">&quot;./node_modules/bootstrap/dist/js/bootstrap.min.js&quot;</span>
</span>        <span class="p">]</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Beachten Sie, dass Sie die Eintragungen gleich zwei Mal in der <code>angular.json</code> vornehmen. Einmal unter <code>architect --&gt; build --&gt; options</code> und auch noch unter <code>architect --&gt; test --&gt; options</code>. </p>
<p>Testen Sie, ob Bootstrap eingebunden wurde, indem Sie für die Liste und die List-Items die Bootstrap-Klassen verwenden:</p>
<div class="tabbed-set" data-tabs="12:1"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><label for="__tabbed_12_1">src/app/members/read.component.html</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>read works!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;list-group&quot;</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot;let member of members&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;list-group-item&quot;</span><span class="p">&gt;</span>{{member.firstname}} {{member.lastname}}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Wir wollen noch eine weitere Struktur-Direktive betrachten, nämlich <code>*ngIf</code>. Bevor wir dies tun, installieren wir uns zunächst auch noch die Bootstrap-Icons.</p>
<h4 id="bootstrap-icons">Bootstrap Icons<a class="headerlink" href="#bootstrap-icons" title="Permanent link">&para;</a></h4>
<p>Um die Bootstrap-Icons zu installieren, geben wir im Terminal in unserem Projektordner</p>
<div class="highlight"><pre><span></span><code>npm i ngx-bootstrap-icons --save
</code></pre></div>

<p>ein. IN unserem <code>node_modules</code>-Ordner entsteht dadurch ein <code>ngx-bootstrap-icons</code>-Ordner. Diesen importieren wir folgt in die <code>app.modules.ts</code>:</p>
<div class="tabbed-set" data-tabs="13:1"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><label for="__tabbed_13_1">app.module.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">BrowserModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/platform-browser&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>

<span class="kr">import</span> <span class="p">{</span> <span class="nx">AppRoutingModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./app-routing.module&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">AppComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./app.component&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">ReadComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./members/read/read.component&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">CreateComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./members/create/create.component&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">UpdateComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./members/update/update.component&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">DeleteComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./members/delete/delete.component&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">HttpClientModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
<span class="hll"><span class="kr">import</span> <span class="p">{</span> <span class="nx">NgxBootstrapIconsModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;ngx-bootstrap-icons&#39;</span><span class="p">;</span>
</span><span class="hll"><span class="kr">import</span> <span class="p">{</span> <span class="nx">PencilSquare</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;ngx-bootstrap-icons&#39;</span><span class="p">;</span>
</span>
<span class="hll"><span class="kr">const</span> <span class="nx">icons</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="hll">  <span class="nx">PencilSquare</span><span class="p">,</span>
</span><span class="hll"><span class="p">};</span>
</span>
<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span>
  <span class="nx">declarations</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">AppComponent</span><span class="p">,</span>
    <span class="nx">ReadComponent</span><span class="p">,</span>
    <span class="nx">CreateComponent</span><span class="p">,</span>
    <span class="nx">UpdateComponent</span><span class="p">,</span>
    <span class="nx">DeleteComponent</span>
  <span class="p">],</span>
  <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">BrowserModule</span><span class="p">,</span>
    <span class="nx">AppRoutingModule</span><span class="p">,</span>
    <span class="nx">HttpClientModule</span><span class="p">,</span>
<span class="hll">    <span class="nx">NgxBootstrapIconsModule</span><span class="p">.</span><span class="nx">pick</span><span class="p">(</span><span class="nx">icons</span><span class="p">)</span>
</span>  <span class="p">],</span>
  <span class="nx">providers</span><span class="o">:</span> <span class="p">[],</span>
  <span class="nx">bootstrap</span><span class="o">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>In Zeile <code>12</code> hätten wir auch alle verfügbaren Icons importieren können, dann mithilfe der Anweisung <code>import { allIcons } from 'ngx-bootstrap-icons';</code>. Dann hätten wir uns auch die Zeilen <code>14-16</code> sparen können, in denen wir explizit angeben, welche(s) Icon, wir verwenden können. Hätten wir alle Icons importiert, würde in Zeile <code>30</code> stehen <code>NgxBootstrapIconsModule.pick(allIcons)</code>. Nähere Informationen dazu finden Sie <a href="https://www.npmjs.com/package/ngx-bootstrap-icons">hier</a>.</p>
<p>Aus der <a href="https://avmaisak.github.io/ngx-bootstrap-icons/">Liste</a> aller verfügbaren Icons haben wir (zunächst) nur das Icon <code>pencil-square</code> ausgewählt. Dieses Icon werden wir im folgenden verwenden. Die Verwendung des Icons innerhalb eines HTML-Templates sieht so aus:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">i-bs</span>
  <span class="na">name</span><span class="o">=</span><span class="s">&quot;pencil-square&quot;</span>
  <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-primary&quot;</span>
  <span class="na">width</span><span class="o">=</span><span class="s">&quot;1em&quot;</span>
  <span class="na">height</span><span class="o">=</span><span class="s">&quot;1em&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">i-bs</span><span class="p">&gt;</span>
</code></pre></div>

<p>In <code>name</code> geben Sie den Namen des Icons an, mit dem <code>class</code>-Attribut können Sie die Farbe setzen (siehe dazu <a href="https://getbootstrap.com/docs/4.5/utilities/colors/">Bootstrap-Colors</a>) und mit den <code>width</code>- und <code>height</code>-Attributen setzen Sie die größe des Icons (hier die doppelte Schriftgröße). Alle Bootstrap-Icons und deren jeweilige Verwendung finden Sie <a href="https://avmaisak.github.io/ngx-bootstrap-icons/">hier</a>. </p>
<h4 id="tabelle-statt-liste">Tabelle statt Liste<a class="headerlink" href="#tabelle-statt-liste" title="Permanent link">&para;</a></h4>
<p>Wir ersetzen die Liste in der <code>read.component.html</code> durch eine Tabelle:</p>
<div class="tabbed-set" data-tabs="14:1"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><label for="__tabbed_14_1">src/app/members/read.component.html</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>read works!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;table table-striped table-hover&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">caption</span><span class="p">&gt;</span>List of Members<span class="p">&lt;/</span><span class="nt">caption</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Nr.<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Vorname<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Nachname<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>E-Mail<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Edit<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot;let member of members; let i=index; trackBy: trackByData&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ i+1 }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{member.firstname}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{member.lastname}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{member.email}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">read</span><span class="err">/&#39;,</span> <span class="na">member</span><span class="err">.</span><span class="na">id</span><span class="err">]&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">i-bs</span>
        <span class="na">name</span><span class="o">=</span><span class="s">&quot;pencil-square&quot;</span>
        <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-secondary&quot;</span>
        <span class="na">width</span><span class="o">=</span><span class="s">&quot;1em&quot;</span>
        <span class="na">height</span><span class="o">=</span><span class="s">&quot;1em&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">i-bs</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Beachten Sie, dass wir der <code>*ngFor</code>-Direktive noch einen <code>index</code> hinzugefügt haben (Zeile <code>15</code>). Damit wird jedem einzelnen Wert aus <code>members</code> (jedem Schleifendurchlauf) ein Index zugeordnet, beginnend bei <code>0</code>. In der ersten Spalte der Tablle (Zeile <code>16</code>) geben wir diesen jeweiligen Wert aus (erhöht um <code>1</code>, um bei <code>1</code> anstelle von <code>0</code> zu beginnen). Über den <code>index</code> für die <code>*ngFor</code>-Direktive finden Sie <a href="https://angular.io/guide/built-in-directives#ngfor-with-index">hier</a> weitere Informationen. </p>
<p>Beachten Sie außerdem, dass wir den Wert der <code>*ngFor</code>-Direktive um <code>trackBy: trackByData</code> erweitert haben. Dazu haben wir die Funktion in <code>app.component.ts</code> hinzugefügt: </p>
<div class="tabbed-set" data-tabs="15:1"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><label for="__tabbed_15_1">src/app/members/read.component.ts (Auszug)</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  <span class="p">}</span>

<span class="hll">  <span class="nx">trackByData</span><span class="p">(</span><span class="nx">index</span><span class="o">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">Data</span><span class="p">)</span><span class="o">:</span> <span class="nx">number</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span> <span class="p">}</span>
</span>
  <span class="nx">readAll</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Dies erfolgt nur zur Performanzsteigerung. Haben wir lange Listen oder lange Tabellen, so wie hier, können geringfügige Veränderungen an Einträgen in diesen Listen oder Tabellen zu einer kompletten Neugestaltung des DOMs kommen - die gesamte Tabelle würde neu erstellt und dem DOM hinzugefügt werden. Um dies zu vermeiden, geben wir an, welche Einträge bereits enthalten - welche also bereits <em>getracked</em> werden. Wir geben dazu die Eigenschaft an, an der das Tracking identifiziert werden soll. Wir nutzen hier die <code>id</code>-Eigenschaft eines jeden <code>members</code>. Weitere Informationen zu <code>trackby</code> finden Sie <a href="https://angular.io/guide/built-in-directives#ngfor-with-trackby">hier</a>.</p>
<p>Wie Sie sehen, verwenden wir in der letzten Spalte der Tabelle das Bootstrap-Icon <code>pencil-square</code> (Zeilen <code>21</code>-<code>26</code>). Dieses Icon ist hier Inhalt eines <code>&lt;a&gt;</code>-Elementes, in dem ein <code>routerLink</code> angegeben wird. Dieser <code>routerLink</code> setzt sich aus der Route <code>/read/</code> und der <code>member.id</code> zusammen. Der Datensatz mit der <code>id=54</code> erzeugt dann z.B. die Route <code>/read/54</code>. Beachten Sie, dass wir in der <code>app-routing.module.ts</code> auch die parametrisierte Route <code>read/:id</code> definiert hatten und damit die <code>ReadComponent</code> aufrufen. </p>
<h4 id="parametrisierte-route-in-readcomponentts">Parametrisierte Route in <code>read.component.ts</code><a class="headerlink" href="#parametrisierte-route-in-readcomponentts" title="Permanent link">&para;</a></h4>
<p>Wir wollen nun dafür sorgen, dass wir auch in der <code>ReadComponent</code> den <code>id</code>-Parameter aus der URL auslesen. Das haben wir für die <code>UpdateComponent</code> bereits gemacht und wiederholen hier exakt die Schritte. Wir öffnen dazu die <code>read.component.ts</code>:</p>
<div class="tabbed-set" data-tabs="16:1"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><label for="__tabbed_16_1">src/app/members/read.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">BackendService</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../shared/backend.service&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Data</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../shared/data&#39;</span><span class="p">;</span>
<span class="hll"><span class="kr">import</span> <span class="p">{</span><span class="nx">ActivatedRoute</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
</span>
<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-read&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./read.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./read.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">ReadComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">members</span><span class="o">:</span> <span class="nx">Data</span><span class="p">[];</span>
<span class="hll">  <span class="nx">selectedId</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>
</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">cs</span><span class="o">:</span> <span class="nx">BackendService</span><span class="p">,</span> <span class="kr">private</span> <span class="nx">route</span><span class="o">:</span> <span class="nx">ActivatedRoute</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">));</span>
</span><span class="hll">    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span>      <span class="k">this</span><span class="p">.</span><span class="nx">readAll</span><span class="p">();</span>
<span class="hll">    <span class="p">}</span>
</span><span class="hll">    <span class="k">else</span> <span class="p">{</span>
</span><span class="hll">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;id = &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span><span class="p">);</span>
</span><span class="hll">    <span class="p">}</span>
</span>  <span class="p">}</span>

  <span class="nx">trackByData</span><span class="p">(</span><span class="nx">index</span><span class="o">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">Data</span><span class="p">)</span><span class="o">:</span> <span class="nx">number</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span> <span class="p">}</span>

  <span class="nx">readAll</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cs</span><span class="p">.</span><span class="nx">getAll</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span><span class="nx">response</span><span class="o">:</span> <span class="nx">Data</span><span class="p">[])</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">members</span> <span class="o">=</span> <span class="nx">response</span><span class="p">,</span>
      <span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
      <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Das heißt, wie binden per * dependency injection*  den <code>ActivatedRouted</code>-Service ein (Zeile <code>15</code>) und lesen in Zeile <code>18</code> den Wert des Parameters <code>id</code> aus der URL aus. Den Wert speichern wir in <code>selctedId</code>. Diese Eigenschaft haben wir in Zeile <code>13</code> der Klasse hinzugefügt. </p>
<p>Nun überlegen wir uns noch Folgendes: wenn wir die Route <strong>mit</strong> einer <code>id</code> aufrufen, also z.B. <code>/read/ 11</code>, dann wollen wir den einzelnen Datensatz mit der <code>id=11</code> lesen. Nur, wenn wir die Route ohne <code>id</code> aufrufen, also nur <code>/read</code>, wollen wir <strong>alle</strong> Datensaätze lesen. Wird in der Route keine <code>id</code> angegeben, dann ist der Wert von <code>selectedId=0</code>. Wir wollen nur für diesen Fall die Funktion <code>readAll()</code> aufrufen, da wir nur für diesen Fall vom Backend alle Datensätze zur Verfügung gestellt bekommen möchten. In den Zielen <code>19-24</code> haben wir deshalb eine Selektion eingefügt, je nachdem, ob wir in der Route eine <code>id</code> angegeben haben (dann erfolgt eine Ausgabe auf der Konsole) oder nicht (dann rufen wir <code>readAll()</code> auf). </p>
<p>Was wir bis jetzt noch nicht haben, was wir aber in Kürze hinzufügen werden, ist der Request an das Backend nach einem einzelnen Datensatz. Zunächst wollen wir aber auch in unserem HTML-Template die Unterscheidung treffen, ob wir eine Route mit <code>id</code> aufgerufen haben oder nicht. </p>
<h4 id="ngif-in-readcomponenthtml"><code>*ngIf</code> in <code>read.component.html</code><a class="headerlink" href="#ngif-in-readcomponenthtml" title="Permanent link">&para;</a></h4>
<p>Wir mplementieren diese Fallunterscheidung in unserem HTML-Template. Was wir wissen ist, dass <code>selectedId</code> einen Wert größer als <code>0</code> hat , wenn wir eine Route <code>/read/xx</code> aufgerufen haben und <code>selectedId</code> hat den Wert <code>0</code>, wenn wir nur die Route <code>/read</code> aufgerufen haben. Diese Unterscheidung fügen wir in <code>read.component.html</code> ein: </p>
<div class="tabbed-set" data-tabs="17:1"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><label for="__tabbed_17_1">src/app/members/read.component.html</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>read works!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;selectedId == 0&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
<span class="hll">  <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;table table-striped table-hover&quot;</span><span class="p">&gt;</span>
</span>    <span class="c">&lt;!-- hier den Inhalt der Tabelle - siehe oben --&gt;</span>
  <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;selectedId &gt; 0&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ selectedId }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">read</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Zurück zur Tabelle<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Wir fügen zwei <code>&lt;div&gt;</code>-Elemente hinzu. Das eine <code>&lt;div&gt;</code>-Element umschließt die Tablle. Das andere <code>&lt;div&gt;</code>-Element enthält eine Überschrift, deren Inhalt der Wert von <code>selectedId</code> ist, sowie einen <code>routerLink</code>, der uns zurück zu <code>/read</code> führt (dann also ohne eine <code>id</code>). </p>
<p>Das erste <code>&lt;div&gt;</code>-Element wird nur dann angezeigt, wenn der Wert von <code>selectedId</code> gleich <code>0</code> ist. Das ergibt sich aus der Struktur-Direktive <code>*ngIf="selectedId == 0"</code>. Das zweite <code>&lt;div&gt;</code>-Element wird nur dann angezeigt, wenn der Wert von <code>selectedId</code> größer als <code>0</code> ist. Das ergibt sich aus der Struktur-Direktive <code>*ngIf="selectedId &gt; 0"</code>. </p>
<p>Wenn wir nun im Browser <code>http://localhost:4200/read</code> eingeben, erscheint folgende Ansicht: </p>
<p><img alt="tabelle" src="../files/103_tabelle.png" /></p>
<p>Wenn wir dann auf einen der Icons in der rechten Spalte klicken, z.B. auf den Eintrag mit der <code>id=55</code>, dann wird im Browser die URL <code>http://localhost:4200/read/55</code> aufgerufen und es erscheint diese Ansicht: </p>
<p><img alt="tabelle" src="../files/104_tabelle.png" /></p>
<p>Mit der <code>*ngIf</code>-Direktive können wir also HTML-Elemente unter bestimmten Bedingungen hinzufügen bzw. verschwinden lassen. Eine ausführliche Beschreibung von <code>*ngIf</code> finden Sie z.B. <a href="https://angular.io/api/common/NgIf">hier</a>.</p>
<h3 id="r-read-one-zb-get-members11">R - read one (z.B. 'GET /members/11')<a class="headerlink" href="#r-read-one-zb-get-members11" title="Permanent link">&para;</a></h3>
<p>Wir haben den Zugriff auf das Backend für den Endpunkt <code>/members</code> unter Verwendung der <code>GET</code>-Methode implementiert. Jetzt wollen wir einen einzelnen Datensatz anfordern. Das Backend stellt diesen unter <code>GET /members/:id</code> zur Verfügung (siehe <a href="../backend/#r-read-one">R - read one</a>). Wir ergänzen also zunächst unseren <code>BackendService</code> um eine <code>getDataById(dataId: number)</code>-Funktion, der wir die <code>id</code> eines Datensatzes übergeben. Auch diese Funktion gibt wieder ein <code>Observable</code> zurück. Im Gegensatz zur <code>getAll()</code>-Funktion wird dieses Mal das <code>Observable</code> aber mit <code>Data</code> typisiert, da wir nur einen Datensatz zurückbekommen. An die <code>baseUrl</code> hängen wir die <code>id</code>, nach der wir suchen, um im Backend eine <code>GET baseUrl/id</code>-Anfrage zu stellen. Die Funktion in <code>backend.service.ts</code> sieht so aus:</p>
<div class="tabbed-set" data-tabs="18:1"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><label for="__tabbed_18_1">backend.service.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Data</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./data&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span>
  <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">BackendService</span> <span class="p">{</span>
  <span class="nx">baseUrl</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:3000/members&#39;</span><span class="p">;</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">http</span><span class="o">:</span> <span class="nx">HttpClient</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">getAll</span><span class="p">()</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Data</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
      <span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Data</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">);</span>
  <span class="p">}</span>

<span class="hll">  <span class="nx">getDataById</span><span class="p">(</span><span class="nx">dataId</span><span class="o">:</span> <span class="nx">number</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Data</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span class="hll">    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
</span><span class="hll">      <span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Data</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">dataId</span><span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span><span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Diese Funktion können wir nun in unserer <code>read.component.ts</code> verwenden. Dort hatten wir ja bereits in der <code>ngOnInit()</code>-Funktion die Fallunterscheidung, ob die Route mit einem <code>id</code>-Parameter aufgerufen wird (dann hat <code>selectedId</code> einen Wert größer als <code>0</code>) oder ohne <code>id</code>-Parameter (also nur <code>/read</code> - dann rufen wir die <code>readAll()</code>-Funktion auf und geben die Tabelle aus).</p>
<p>Wir ergänzen die <code>read.component.ts</code> zunächst um eine <code>readOne(id: number)</code>-Funktion, die die <code>getDataById(id)</code> des <code>BackendService</code> <em>subscribed</em> und rufen diese dann für den Fall auf, dass die <code>/read</code>-Route parametrisiert ist:</p>
<div class="tabbed-set" data-tabs="19:1"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><label for="__tabbed_19_1">read.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">BackendService</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../shared/backend.service&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Data</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../shared/data&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">ActivatedRoute</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-read&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./read.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./read.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">ReadComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">members</span><span class="o">:</span> <span class="nx">Data</span><span class="p">[];</span>
<span class="hll">  <span class="nx">member</span><span class="o">:</span> <span class="nx">Data</span><span class="p">;</span>
</span>  <span class="nx">selectedId</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">cs</span><span class="o">:</span> <span class="nx">BackendService</span><span class="p">,</span> <span class="kr">private</span> <span class="nx">route</span><span class="o">:</span> <span class="nx">ActivatedRoute</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">readAll</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;id = &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span><span class="p">);</span>   <span class="c1">// nur fuer debug</span>
<span class="hll">      <span class="k">this</span><span class="p">.</span><span class="nx">readOne</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span><span class="p">);</span>
</span>    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">trackByData</span><span class="p">(</span><span class="nx">index</span><span class="o">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">Data</span><span class="p">)</span><span class="o">:</span> <span class="nx">number</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span> <span class="p">}</span>

  <span class="nx">readAll</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cs</span><span class="p">.</span><span class="nx">getAll</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span><span class="nx">response</span><span class="o">:</span> <span class="nx">Data</span><span class="p">[])</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">members</span> <span class="o">=</span> <span class="nx">response</span><span class="p">,</span>
      <span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
      <span class="p">);</span>
  <span class="p">}</span>

<span class="hll">  <span class="nx">readOne</span><span class="p">(</span><span class="nx">id</span><span class="o">:</span> <span class="nx">number</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">cs</span><span class="p">.</span><span class="nx">getDataById</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span>
</span><span class="hll">      <span class="p">(</span><span class="nx">response</span><span class="o">:</span> <span class="nx">Data</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">member</span> <span class="o">=</span> <span class="nx">response</span><span class="p">,</span>
</span><span class="hll">      <span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
</span><span class="hll">    <span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span><span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>In Zeile <code>25</code> wird die <code>readOne()</code>-Funktion aufgerufen für den Fall, dass <code>selectedId</code> ungleich <code>0</code> ist (also nicht die Tabelle aller Datensätze angezeigt werden soll). Dieser Funktion wird der Wert von <code>selectedId</code> übergeben (den wir aus der URL ausgelesen haben, also z.B. <code>http://localhost:4200/read/11</code>). </p>
<p>In den Zeilen <code>38-43</code> sehen wir die Definition der <code>readOne()</code>-Funktion. Es wird die <code>getDataById()</code>-Funktion des <code>BackendService</code> <code>subscribe()</code> und die <code>response</code>(vom Typ <code>Data</code>) in die neu hinzugefügte (Zeile <code>13</code>) Eigenschaft <code>member</code> gespeichert. </p>
<p>Im nächsten Schritt lassen wir die Werte von <code>member</code> in unserem HTML-Template mittels Interpolation ausgeben:</p>
<div class="tabbed-set" data-tabs="20:1"><input checked="checked" id="__tabbed_20_1" name="__tabbed_20" type="radio" /><label for="__tabbed_20_1">read.component.html</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>read works!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;selectedId == 0&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;table table-striped table-hover&quot;</span><span class="p">&gt;</span>
    <span class="c">&lt;!-- hier kommt der Inhalt der Tabelle rein (gekuerzt) --&gt;</span>
  <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;selectedId &gt; 0&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ selectedId }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="hll">  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member.id }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span class="hll">  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member.firstname }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span class="hll">  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member.lastname }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span class="hll">  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member.email }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span>  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">read</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Zurück zur Tabelle<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>In den Zeilen <code>10-13</code> lassen wir alle Werte von <code>member</code> auf der Seite in jeweils <code>&lt;p&gt;</code>-Elementen anzeigen. </p>
<p>Wir probieren aus und rufen im Browser <code>http://localhost:4200/read</code> auf. Es erscheint die Tabelle aller Datensätze. Wir klicken auf eines der Icons in der <code>Edit</code>-Spalte der Tabelle. Die URL im Browser ist nun parametrisiert, z.B. <code>http://localhost:4200/read/56</code> und es erscheint:</p>
<p><img alt="readone" src="../files/105_tabelle.png" /></p>
<p>Das sieht gut aus und alles scheint zu funktionieren! Wenn wir uns aber die Konsole in den Entwicklertools dabei anschauen, dann stellen wir fest, dass ein Fehler erscheint:</p>
<p><img alt="error" src="../files/106_error.png" /></p>
<p>Das Problem ist, dass versucht wird, die Komponente darzustellen (zu <em>rendern</em>), noch bevor ("parallel" dazu) die <code>readOne()</code>-Funktion fertig ausgeführt ist und die <code>response</code> in <code>member</code> gespeichert hat. Das <em>Rendern</em> der Webseite erfolgt nebenläufig zur asynchronen Ausführung der <code>subscribe()</code>-Funktion in <code>readOne()</code>. Das ist einerseits ein sehr nützliches Feature, denn die Darstellung der Webseite wird nicht dadurch aufgehalten, dass eine Funktion noch ausgeführt wird. Der asynchrone Ansatz ist ausgesprochen nutzerfreundlich! Sobald der Wert existiert, wird er auch dargestellt - deshalb erscheint unsere Webseite auch fehlerfrei. </p>
<h4 id="safe-navigation-operator">Safe navigation operator<a class="headerlink" href="#safe-navigation-operator" title="Permanent link">&para;</a></h4>
<p>Um zu vermeiden, dass versucht wird, eine Wert über Interpolation darzustellen, der noch gar nicht existiert (<code>undefined</code> ist), kann der sogenannte <em>safe navigation operator</em> verwendet werden. Das Prinzip dieses Operators entspricht einer <code>*ngIf</code>-Direktive. Erst wenn der Wert ungleich <code>undefined</code> ist, wird er dargestellt. Die Syntax des <em>safe navigation operators</em>  ist ein <code>?</code>:</p>
<blockquote>
<p><code>objekt?.eigenschaft</code></p>
</blockquote>
<p>Solange <code>objekt</code> noch <code>undefined</code> ist, wird nicht auf die (noch nicht existierende) <code>eigenschaft</code> zugegriffen. Wir fügen den <em>safe navigation operator</em> in die <code>read.component.html</code> ein:</p>
<div class="tabbed-set" data-tabs="21:1"><input checked="checked" id="__tabbed_21_1" name="__tabbed_21" type="radio" /><label for="__tabbed_21_1">read.component.html (Auszug mit safe navigation oprator)</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;selectedId &gt; 0&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ selectedId }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member?.id }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member?.firstname }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member?.lastname }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member?.email }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">read</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Zurück zur Tabelle<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Jetzt haben wir auch in der Konsole keinen Fehler mehr, da der Zugriff auf <code>member.id</code> gar nicht versucht wird, solange <code>member === undefined</code>. </p>
<h4 id="error-datensatz-existiert-nicht">Error - Datensatz existiert nicht<a class="headerlink" href="#error-datensatz-existiert-nicht" title="Permanent link">&para;</a></h4>
<p>In der <code>readAll()</code>-Funktion haben wir uns um einen Fehlerfall nicht weiter gekümmert. Für den Fall eines Fehlers geben wir den Fehler einfach auf der Konsole aus. Die derzeitige Implementierung von <code>readOne()</code> ist ebenso. Allerdings kann es bei <code>readOne()</code> ja ohne Probleme vorkommen, dass wir keinen Datensatz zurückbekommen, sondern einen Fehler, nämlich dann, wenn der Datensatz mit der angegebenen <code>id</code> gar nicht existiert. Angenommen, wir rufen im Browser <code>http://localhost:4200/read/12345</code> auf, dann gibt es in der Datenbank keinen Datensatz mit der <code>id=12345</code>. Einen solchen "Fehler" sollten wir nun behandeln. </p>
<p>Wir wiederholen nochmal die drei Parameter der <code>subscribe()</code>-Funktion:</p>
<ul>
<li><code>next</code> gibt die Daten zurück, wenn es möglich ist (<code>response</code>)</li>
<li><code>error</code> gibt einen Fehler zurück, falls er auftritt</li>
<li><code>completed</code> bei erfolgreicher Response, nutzen wir nicht</li>
</ul>
<p>Sowohl bei der <code>readAll()</code>- als auch bei der <code>readOne()</code>-Methode haben wir uns die <code>response</code> in einer eigenen Eigenschaft gespeichert (<code>members</code> bzw. <code>member</code>). Das wollen wir nun auch für einen Fehler machen. Wir fügen eine Eigenschaft <code>error</code> in unsere Klasse ein. Diese ist vom Typ <code>HttpErrorResponse</code>. Ein <a href="https://angular.io/api/common/http/HttpErrorResponse"><code>HttpErrorResponse</code></a>-Objekt hat zwei wesentliche Eigenschaften: <code>message</code> und <code>status</code>. Wir erweitern zunächst die <code>read.component.ts</code> und die Eigenschaft <code>error</code> und belegen diese im Fehlerfall mit dem <code>HttpErrorResponse</code>-Objekt:</p>
<div class="tabbed-set" data-tabs="22:1"><input checked="checked" id="__tabbed_22_1" name="__tabbed_22" type="radio" /><label for="__tabbed_22_1">read.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">BackendService</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../shared/backend.service&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Data</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../shared/data&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">ActivatedRoute</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">HttpErrorResponse</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-read&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./read.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./read.component.css&#39;</span><span class="p">],</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">ReadComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">members</span><span class="o">:</span> <span class="nx">Data</span><span class="p">[];</span>
  <span class="nx">member</span><span class="o">:</span> <span class="nx">Data</span><span class="p">;</span>
  <span class="nx">selectedId</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>
<span class="hll">  <span class="nx">error</span><span class="o">:</span> <span class="nx">HttpErrorResponse</span><span class="p">;</span>
</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">cs</span><span class="o">:</span> <span class="nx">BackendService</span><span class="p">,</span> <span class="kr">private</span> <span class="nx">route</span><span class="o">:</span> <span class="nx">ActivatedRoute</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">readAll</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;id = &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span><span class="p">);</span>   <span class="c1">// nur fuer debug</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">readOne</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">trackByData</span><span class="p">(</span><span class="nx">index</span><span class="o">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">Data</span><span class="p">)</span><span class="o">:</span> <span class="nx">number</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span> <span class="p">}</span>

  <span class="nx">readAll</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cs</span><span class="p">.</span><span class="nx">getAll</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span><span class="nx">response</span><span class="o">:</span> <span class="nx">Data</span><span class="p">[])</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">members</span> <span class="o">=</span> <span class="nx">response</span><span class="p">,</span>
      <span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
      <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">readOne</span><span class="p">(</span><span class="nx">id</span><span class="o">:</span> <span class="nx">number</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cs</span><span class="p">.</span><span class="nx">getDataById</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span><span class="nx">response</span><span class="o">:</span> <span class="nx">Data</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">member</span> <span class="o">=</span> <span class="nx">response</span><span class="p">,</span>
<span class="hll">      <span class="nx">error</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nx">error</span><span class="p">,</span>
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Wir haben nur zwei Zeilen geändert. In Zeile <code>16</code> ist die Eigenschaft <code>error</code> hinzugefügt worden und in Zeile <code>43</code> erfolgt die Ausgabe des Fehlers nicht mehr auf der Konsole, sondern der Fehler (das <code>HttpErrorResponse</code>-Objekt) wird in <code>this.error</code> gespeichert. </p>
<p>Wir passen nun auch noch die <code>read.component.html</code> an, um den Fehlerfall auszugeben. Dazu nutzen wir die <code>*ngIf</code>-Direktive:</p>
<div class="tabbed-set" data-tabs="23:1"><input checked="checked" id="__tabbed_23_1" name="__tabbed_23" type="radio" /><label for="__tabbed_23_1">read.component.html (Auszug mit Fehlerbahndlung)</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;selectedId &gt; 0&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ selectedId }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="hll">  <span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;error&quot;</span><span class="p">&gt;</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ error?.message }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ error?.status }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span class="hll">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span class="hll">  <span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;member&quot;</span><span class="p">&gt;</span>
</span>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member?.id }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member?.firstname }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member?.lastname }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member?.email }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="hll">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span>  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">read</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Zurück zur Tabelle<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Für den Fall, dass ein Fehler aufgetreten ist (Zeile <code>33</code>), werden die <code>error.message</code> und der <code>error.status</code> ausgegeben. Für den Fall, dass es einen <code>member</code> gibt (also kein Fehler aufgetreten ist), werden die Eigenschaften von <code>member</code> ausgegeben. </p>
<p>Wir testen die Ansicht durch Aufruf einer URL im Browser, die als <code>id</code> einen Wert verwendet, der nicht in der Datenbank enthalten ist. Bei mir z.B. <code>http://localhost:4200/read/11</code>. Das Ergebnis sieht dann so aus:</p>
<p><img alt="error" src="../files/107_error.png" /></p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>Wir haben jetzt auch die <code>GET /members/id</code>-Anfrage an das Backend umgesetzt, d.h. wir können uns jetzt einen einzelnen Datensatz vom Backend zurückgeben lassen und diesen verarbeiten. Wir haben außerdem den <em>safe navigation operator</em> kennengelernt, der es erlaubt, erst dann auf Eigenschaften eines Objektes zuzugreifen, wenn das Objekt vollständig geladen ist. Außerdem haben wir den Fehler behandelt, der auftreten kann, falls die angefragte <code>id</code> in der Datenbank gar nicht existiert und somit kein Datensatz zurückgeliefert wird. Nun kümmern wir uns um den Fall, dass vom Client Daten an das Backend gesendet werden, z.B. um ein Update eines Datensatzes durchzuführen (<code>PUT /members/id</code>). </p>
</div>
<h4 id="formular-fur-einen-datensatz">Formular für einen Datensatz<a class="headerlink" href="#formular-fur-einen-datensatz" title="Permanent link">&para;</a></h4>
<p>Bevor wir uns um das Update eines Datensatzes kümmern, machen wir unser Frontend noch ein bisschen schicker. Die Anzeige aller Datensätze in einer Tabelle ist bereits okay (man könnte hier noch Paginierung und Sortierung hinzufügen). Wenn wir in der Tablle auf ein <code>Edit</code>-Icon klicken, dann mit dem Ziel, diesen Datensatz zu ändern. Wir werden deshalb die <code>/read/id</code>-Ansicht so ändern, dass der Datensatz in ein Formular eingefügt wird. </p>
<p>Formulare werden verwendet, um Nutzereingaben zu ermöglichen und die eingegebenen Daten zu verwalten, sie z.B. in einer Datenbank zu speichern. In Angular gibt es zwei verschiedene Ansätze, Forumlare zu erstellen:</p>
<ul>
<li><strong>reaktive Formulare</strong> werden in der TypeScript-Klasse konzipiert und basieren auf einem unveränderlichen Datenmodell. Sie sind leichter zu skalieren als <em>Template-basierte Formulare</em> und besser wiederzuverwenden. Sie sind prinzipiell den <em>Template-basierten Formularen</em> vorzuziehen, außer dass Formular ist sehr einfach und besteht z.B. nur aus einem einzigen Eingabefeld.</li>
<li><strong>Template-basierte Formulare</strong> basieren auf Direktiven im HTML. Sie sind sehr einfach zu erstellen (direkt im HTML), können aber weniger einfach evaluiert und getestet werden und sind für strukturierte (verschachtelte) Datenmodelle ungeeignet. </li>
</ul>
<p>Für weitere Informationen zu Formularen in Angular siehe <a href="https://angular.io/guide/forms-overview#introduction-to-forms-in-angular">hier</a>. </p>
<p>Die beiden wesentlichen TypeScript-Klassen bei Formularen sind</p>
<ul>
<li><code>FormControl</code> für ein einzelnes Steuerelement (z.B. ein <code>input</code> oder ein <code>radio</code>Button) und</li>
<li><code>FormGroup</code> für eine zusammenhängende Menge von Steuerlementen (einem Formular). </li>
</ul>
<p>Damit unsere <code>ReadComponent</code> nicht zu überladen wird, erstellen wir für das Formular eine eigene Komponente. Diese Komponente wird eine <em>Kindkomponente</em> der <code>ReadComponent</code>. Wir erstellen die neue <code>FormComponent</code> deshalb in den Ordner der <code>ReadComponent</code>:</p>
<div class="highlight"><pre><span></span><code>ng g c members/read/form 
</code></pre></div>

<p>In der <code>form.component.ts</code> erstellen wir zunächst mithilfe des <a href="https://angular.io/api/forms/FormBuilder"><code>FormBuilder</code>s</a> das Formular:</p>
<div class="tabbed-set" data-tabs="24:1"><input checked="checked" id="__tabbed_24_1" name="__tabbed_24" type="radio" /><label for="__tabbed_24_1">src/app/members/read/form.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Input</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">FormBuilder</span><span class="p">,</span> <span class="nx">FormGroup</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-form&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./form.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./form.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">FormComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">form</span><span class="o">:</span> <span class="nx">FormGroup</span><span class="p">;</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">fb</span><span class="o">:</span> <span class="nx">FormBuilder</span><span class="p">,</span> <span class="kr">private</span> <span class="nx">location</span><span class="o">:</span> <span class="nx">Location</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">form</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">fb</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span>
      <span class="p">{</span>
        <span class="nx">idControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">firstNameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">lastNameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">emailControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
      <span class="p">}</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Wir nennen das Formular <code>form</code>. Es ist vom Typ <a href="https://angular.io/api/forms/FormGroup"><code>FormGroup</code></a> (Zeile <code>10</code>). Mithilfe der <code>group()</code>-Funktion des <code>FormBuilder</code> erstellen wir uns die vier <code>FormControl</code>-Elemente <code>idControl</code>, <code>firstNameControl</code>, <code>lastNameControl</code> und <code>emailControl</code> (Zeilen <code>13-21</code>). Sie haben zunächst keinen Wert (kein <code>value</code>, sind also zunächst leer) und die Eingabe in die jeweiligen Felder soll überprüft werden (<code>Validators.required</code>). Diese <code>FormGroup</code> wird in unsere Eigenschaft <code>form</code> gespeichert. <code>form</code> kann man als Name unseres Formulars auffassen. </p>
<p>Das HTML-Template des Formulars könnte wie folgt aussehen (Verwendung von Boostrap-Klassen):</p>
<div class="tabbed-set" data-tabs="25:1"><input checked="checked" id="__tabbed_25_1" name="__tabbed_25" type="radio" /><label for="__tabbed_25_1">src/app/members/read/form.component.html</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">form</span> <span class="err">[</span><span class="na">formGroup</span><span class="err">]=&quot;</span><span class="na">form</span><span class="err">&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group row&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;staticId&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-sm-2 col-form-label&quot;</span><span class="p">&gt;</span>id<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-sm-10&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;number&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;idControl&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;staticId&quot;</span> <span class="na">readonly</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group row&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;inputFirstName&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-sm-2 col-form-label&quot;</span><span class="p">&gt;</span>First Name<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-sm-10&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;firstNameControl&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;inputFirstName&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group row&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;inputLastName&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-sm-2 col-form-label&quot;</span><span class="p">&gt;</span>Last Name<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-sm-10&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;lastNameControl&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;inputLastName&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group row&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;inputEmail&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-sm-2 col-form-label&quot;</span><span class="p">&gt;</span>E-Mail<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-sm-10&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;emailControl&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;inputEmail&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group row&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-sm-6&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-primary btn-block&quot;</span> <span class="err">[</span><span class="na">disabled</span><span class="err">]=&quot;!</span><span class="na">form</span><span class="err">.</span><span class="na">valid</span><span class="err">&quot;</span><span class="p">&gt;</span>Update<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-sm-6&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;cancel&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-secondary btn-block&quot;</span><span class="p">&gt;</span>Cancel<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>In Zeile <code>3</code> erfolgt durch <code>[formGroup]="form"</code> ein sogenantes <em>property binding</em>, d.h. eine Eigenschaft (ein Attribut) des <code>&lt;form&gt;</code>-Elementes wird an einen Wert aus der zugehörigen TypeScript-Klasse gebunden. Uns genügt es, das gesamte Forumlar <code>form</code> an die gesamte <code>FormGroup</code> zu binden. Falls Sie einzelne Werte aus den Formularen einzeln auswerten möchten, können Sie die einzelnen <code>FormControl</code>-Elemente auch in den einzelnen <code>&lt;input&gt;</code>-Elementen mittels z.B. <code>[formControl]="firstNameControl"</code> binden. Siehe dazu z.B. <a href="https://angular.io/guide/reactive-forms">hier</a>. </p>
<h5 id="einbinden-der-formcomponent-in-die-readcomponent">Einbinden der <code>FormComponent</code> in die <code>ReadComponent</code><a class="headerlink" href="#einbinden-der-formcomponent-in-die-readcomponent" title="Permanent link">&para;</a></h5>
<p>Wir binden die <code>FormComponent</code> über den Komponentenselktor der <code>FormComponent</code> in die <code>ReadComponent</code> ein. Dies erfolgt für den Fall, dass die <code>selectedId</code> der <code>ReadComponent</code> größer als <code>0</code> ist (wir also nicht alle Datensätze in der Tabelle ausgeben, sondern nur genau einen Datensatz) und darin für den Fall, dass wir keinen <code>error</code> haben (also keinen entsprechenden Datensatz gefunden):</p>
<div class="tabbed-set" data-tabs="26:1"><input checked="checked" id="__tabbed_26_1" name="__tabbed_26" type="radio" /><label for="__tabbed_26_1">src/app/members/read.component.html (Auszug)</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>37
38
39
40
41
42
43
44</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  <span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;member&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member?.id }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member?.firstname }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member?.lastname }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ member?.email }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="hll">    <span class="p">&lt;</span><span class="nt">app-form</span><span class="p">&gt;&lt;/</span><span class="nt">app-form</span><span class="p">&gt;</span>
</span>  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">read</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Zurück zur Tabelle<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Wir könnten die Liste der <code>&lt;p&gt;</code>-Elemente an dieser Stelle auch schon vollständig durch das Formular ersetzen. An die Stelle des Komponentenselektors <code>&lt;app-form&gt;&lt;/form&gt;app-form&gt;</code> wird das Formular eingefügt. Es wird jetzt auch bereits angezeigt. Öffnen Sie dazu im Browser unter der URL <code>http://localhost:4200/read</code> und klicken Sie auf einen <code>Edit</code>-Icon in der rechten Spalte. </p>
<h5 id="datenfluss-von-eltern-nach-kindkomponente">Datenfluss von Eltern- nach Kindkomponente<a class="headerlink" href="#datenfluss-von-eltern-nach-kindkomponente" title="Permanent link">&para;</a></h5>
<p>In der Elternkomponente <code>ReadComponent</code> sind die Daten des Datensatzes, der im Formular angezeigt werden soll,  unter der Eigenschaft <code>member</code> verfügbar. Die Frage ist nun, wie diese Daten von der Eltern- auf die Kondkomponente übertragen werden können. Dazu werden zwei Konzepte verwendet:</p>
<ol>
<li>In der Kindkomponente ( der <code>*.ts</code> der Kindkomponente) wird mithilfe des <code>@Input()</code>-<em>decorators</em> eine Eigenschaft der Kindkomponente festgelegt, in die die Daten der Elternkomponente aufgenommen werden sollen. Wir werden dazu die Anweisung <code>@Input() data: Data;</code> unserer Kindkomponente (der <code>FormComponent</code>) hinzufügen. </li>
<li>In der Elternkomponente (der <code>*.html</code> der Elternkomponente) werden mithilfe von <em>property binding</em> dem Komponentenselktor der Kindkomponente die Daten übergeben. Wir werden deshalb den Aufruf des Komponentenselektors in der <code>readComponent</code> erweitern um <code>&lt;app-form [data]="member"&gt;&lt;/app-form&gt;</code>, d.h. die Eigenschaft <code>data</code> der Kindkomponente bekommt den Wert der Eigenschaft <code>member</code> der Elternkomponente übergeben.</li>
</ol>
<p>Die generelle Syntax der <em>property binding</em> an den Kindselektoren sieht so aus:</p>
<blockquote>
<p><code>&lt;app-child&gt; [childProperty]="parentProperty" &lt;/app-child&gt;</code></p>
</blockquote>
<p>wobei in der <code>child.component.ts</code> definiert sein muss:</p>
<blockquote>
<p><code>@Input() childProperty: Typ;</code></p>
</blockquote>
<p>Wir erweitern also unsere <code>form.component.ts</code> (unsere Kindkomponente) um:</p>
<div class="tabbed-set" data-tabs="27:1"><input checked="checked" id="__tabbed_27_1" name="__tabbed_27" type="radio" /><label for="__tabbed_27_1">src/app/members/read/form.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Input</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">FormBuilder</span><span class="p">,</span> <span class="nx">FormGroup</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
<span class="hll"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Data</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../../shared/data&#39;</span><span class="p">;</span>
</span><span class="kr">import</span> <span class="p">{</span> <span class="nx">Location</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-form&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./form.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./form.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">FormComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
<span class="hll">  <span class="err">@</span><span class="nx">Input</span><span class="p">()</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">Data</span><span class="p">;</span>
</span>  <span class="nx">form</span><span class="o">:</span> <span class="nx">FormGroup</span><span class="p">;</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">fb</span><span class="o">:</span> <span class="nx">FormBuilder</span><span class="p">,</span> <span class="kr">private</span> <span class="nx">location</span><span class="o">:</span> <span class="nx">Location</span><span class="p">)</span> <span class="p">{</span>

  <span class="cm">/* und hier der Rest - gekuerzt */</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>und die <code>read.component.html</code> um</p>
<div class="tabbed-set" data-tabs="28:1"><input checked="checked" id="__tabbed_28_1" name="__tabbed_28" type="radio" /><label for="__tabbed_28_1">src/app/members/read.component.html (nur der Komponentenselektor)</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>42</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">app-form</span> <span class="err">[</span><span class="na">data</span><span class="err">]=&quot;</span><span class="na">member</span><span class="err">&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">app-form</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Weitere Informationen zum Datenfluss von der Eltern- auf die Kindkomponente finden Sie <a href="https://angular.io/guide/inputs-outputs#sending-data-to-a-child-component">hier</a>. </p>
<p>Nun können können wir die Werte in unser Formular einfügen. Um die Werte in das Formular einzutragen, bietet die Klasse <code>FormGroup</code> zwei Funktionen an:</p>
<ul>
<li><code>setValue()</code> - setzt für <strong>alle</strong> <code>FormControl</code>-Elemente innerhalb der <code>FormGroup</code> einen Wert (<code>value</code>)</li>
<li><code>patchValue()</code> - kann allen oder <strong>bestimmten</strong> (einzelnen) <code>FormControl</code>-Elementen einen Wert (<code>value</code>) zuweisen. </li>
</ul>
<p>Wir verwenden <code>patchValue()</code>, Sie können aber auch <code>setValue()</code> ausprobieren:</p>
<div class="tabbed-set" data-tabs="29:1"><input checked="checked" id="__tabbed_29_1" name="__tabbed_29" type="radio" /><label for="__tabbed_29_1">src/app/members/read/form.component.ts (Auszug)</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">patchValue</span><span class="p">({</span>
      <span class="nx">idControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
      <span class="nx">firstNameControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">firstname</span><span class="p">,</span>
      <span class="nx">lastNameControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">lastname</span><span class="p">,</span>
      <span class="nx">emailControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">email</span>
    <span class="p">});</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Wenn Sie jetzt den Browser öffnen, sollten die entsprechenden Werte in das Formular eingetragen sein. </p>
<h5 id="ereignisse-zum-formular-hinzufugen">Ereignisse zum Formular hinzufügen<a class="headerlink" href="#ereignisse-zum-formular-hinzufugen" title="Permanent link">&para;</a></h5>
<p>Wir fügen dem Formular noch zwei Ereignisse hinzu. Das eine Ereignis (<code>submit</code>) wird ausgelöst, wenn das Formular versendet wird, also auf den <code>submit</code>-Button gedrückt wird. Das andere Ereignis hängen wir an den <code>cancel</code>-Button. Wir fügen die Ereignisse in der <code>form.component.html</code> hinzu:</p>
<div class="tabbed-set" data-tabs="30:1"><input checked="checked" id="__tabbed_30_1" name="__tabbed_30" type="radio" /><label for="__tabbed_30_1">src/app/members/read/form.component.html (Auszug)</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="hll">    <span class="p">&lt;</span><span class="nt">form</span> <span class="err">[</span><span class="na">formGroup</span><span class="err">]=&quot;</span><span class="na">form</span><span class="err">&quot;</span> <span class="err">(</span><span class="na">ngSubmit</span><span class="err">)=&quot;</span><span class="na">onSubmit</span><span class="err">()&quot;</span><span class="p">&gt;</span>
</span>
    <span class="c">&lt;!-- gekuerzt - siehe oben --&gt;</span>

      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-sm-6&quot;</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;cancel&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-secondary btn-block&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">cancel</span><span class="err">()&quot;</span><span class="p">&gt;</span>Cancel<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span>      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Um sich an das <code>submit</code>-Ereignis anzumelden, wird für das <code>&lt;form&gt;</code>-Element <code>(ngSubmit)</code> hinzugefügt und als dessen Wert die Funktion, die aufgerufen werden soll, beim Absenden des Formulars - hier die Funktion <code>onSubmit()</code> (die wir gleich noch in <code>form.component.ts</code> einfügen werden). Für den <code>Cancel</code>-Button melden wir uns an das <code>click</code>-Ereignis mithilfe von <code>(click)</code> und der Angabe der Funktion, die ausgeführt werden soll (hier <code>cancel()</code>) an. </p>
<p>Jetzt müssen noch die beiden Ereignisbehandlungsfunktionen in die <code>form.component.ts</code> eingefügt werden. In der Funktion <code>onSubmit()</code> geben wir zunächst nur alle Werte auf die Konsole aus, die in den <code>&lt;input&gt;</code>-Elementen beim Absenden des Formulars standen. Wir werden diese Funktion in den folgenden Abschnitten ausbauen. </p>
<p>In der Funktion <code>cancel()</code> wollen wir zurück zur Tabelle wechseln (also alle Datensätze anzeigen) und das Formular nicht absenden. Dazu verwenden wir die Klasse <code>Location</code> und deren Funktion <code>back()</code>. Die Funktion <code>back()</code> wirkt genauso als würden wir im Browser in der Browserhistorie zurückblättern. Weitere Information zur Klasse <code>Location</code> finden Sie <a href="https://angular.io/api/common/Location">hier</a>.</p>
<div class="tabbed-set" data-tabs="31:1"><input checked="checked" id="__tabbed_31_1" name="__tabbed_31" type="radio" /><label for="__tabbed_31_1">src/app/members/read/form.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">Input</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">FormBuilder</span><span class="p">,</span> <span class="nx">FormGroup</span><span class="p">,</span> <span class="nx">Validators</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Data</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../../shared/data&#39;</span><span class="p">;</span>
<span class="hll"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Location</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span>
</span>
<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-form&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./form.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./form.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">FormComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="err">@</span><span class="nx">Input</span><span class="p">()</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">Data</span><span class="p">;</span>
  <span class="nx">form</span><span class="o">:</span> <span class="nx">FormGroup</span><span class="p">;</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">fb</span><span class="o">:</span> <span class="nx">FormBuilder</span><span class="p">,</span> <span class="kr">private</span> <span class="nx">location</span><span class="o">:</span> <span class="nx">Location</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">form</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">fb</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span>
      <span class="p">{</span>
        <span class="nx">idControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">firstNameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">lastNameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">emailControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
      <span class="p">}</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">patchValue</span><span class="p">({</span>
      <span class="nx">idControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
      <span class="nx">firstNameControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">firstname</span><span class="p">,</span>
      <span class="nx">lastNameControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">lastname</span><span class="p">,</span>
      <span class="nx">emailControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">email</span>
    <span class="p">});</span>
  <span class="p">}</span>

<span class="hll">  <span class="nx">onSubmit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
</span><span class="hll">    <span class="c1">// TODO: Use EventEmitter with form value</span>
</span><span class="hll">    <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span>
<span class="hll">  <span class="nx">cancel</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span>
</span><span class="hll">  <span class="p">}</span>
</span><span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Wenn Sie nun auf den Button <code>Update</code> klicken, dann erscheinen alle Werte aus dem Formular als ein JSON auf der Konsole. Beachten Sie, dass alle Felder ausgefüllt sein müssen. Sobald ein <code>input</code>-Feld leer ist, ist der Button <code>Update</code> deaktiviert. Das <code>id</code>-Feld ist <code>readonly</code> und kann nicht verändert werden. Wenn Sie auf den <code>Cancel</code>-Button klicken, gelangen Sie zurück zur Tabelle. </p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>Wir haben uns ein reaktives Formular in einer Kindkomponente erstellt und haben Daten von der Eletern- auf die Kindkomponente fließen lassen. Außerdem haben wir dem Formular zwei Ereignisse hinzugefügt. Jetzt wäre es Zeit, die Anwendung ein wenig aufzuräumen und die Darstellung zu verbessern. Beispielsweise könnten Sie jetzt eine Navigations-Komponente hinzufügen (wie in Übung 6) und alle unnötigen Ausgaben aus den HTML-Templates herausnehmen. </p>
</div>
<p>Die Anwendung könnte jetzt z.B. so aussehen (je nachdem, ob und wie Sie sie noch gestaltet haben):</p>
<p><img alt="alles" src="../files/108_alles.png" /></p>
<p>Den vollständigen Code für diesen Abschnitt (bis hier her) finden Sie <a href="https://github.com/jfreiheit/frontend3">hier</a>.</p>
<h2 id="u-update">U - update<a class="headerlink" href="#u-update" title="Permanent link">&para;</a></h2>
<p>Wenn wir das Formular für einen einzelnen Datensatz angezeigt bekommen (z.B. <code>http://localhost:4200/read/54</code>):</p>
<p><img alt="update" src="../files/109_update.png" /></p>
<p>, dann mit dem Ziel, Daten in diesem Datensatz zu ändern und die Änderungen zu speichern. Das heißt, wir wollen ein <code>update</code> durchführen. Siehe im Backend dazu <a href="../webtech/backend/#u-update">U - update</a>. Zuvor schauen wir uns aber noch das allgemeine Prinzip dafür an, Daten von der Kindkomponente an die Elternkoponente zurückzugeben, denn wir haben die Daten des Formulars ja in der <code>FormComponent</code>, die innerhalb der <code>ReadComponent</code> eingebunden wurde. Der Datenfluss von Eltern- auf Kindkomponente wurde bereits <a href="./#datenfluss-von-eltern-nach-kindkomponente">hier</a> erläutert. Nun sollen die Daten andersherum fließen, also von der Kind- zur Elternkoponente. </p>
<h3 id="datenfluss-von-kind-nach-elternkomponente">Datenfluss von Kind- nach Elternkomponente<a class="headerlink" href="#datenfluss-von-kind-nach-elternkomponente" title="Permanent link">&para;</a></h3>
<p>Die <code>form.component.ts</code> (also die TypeScript-Klasse der Kindkomponente) sieht bis jetzt so aus:</p>
<details><summary>src/app/members/read/form.component.ts</summary><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Input</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">FormBuilder</span><span class="p">,</span> <span class="nx">FormGroup</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Data</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../../shared/data&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Location</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-form&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./form.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./form.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">FormComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="err">@</span><span class="nx">Input</span><span class="p">()</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">Data</span><span class="p">;</span>
  <span class="nx">form</span><span class="o">:</span> <span class="nx">FormGroup</span><span class="p">;</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">fb</span><span class="o">:</span> <span class="nx">FormBuilder</span><span class="p">,</span> <span class="kr">private</span> <span class="nx">location</span><span class="o">:</span> <span class="nx">Location</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">form</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">fb</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span>
      <span class="p">{</span>
        <span class="nx">idControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">firstNameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">lastNameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">emailControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
      <span class="p">}</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">patchValue</span><span class="p">({</span>
      <span class="nx">idControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
      <span class="nx">firstNameControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">firstname</span><span class="p">,</span>
      <span class="nx">lastNameControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">lastname</span><span class="p">,</span>
      <span class="nx">emailControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">email</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">onSubmit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="c1">// TODO: Use EventEmitter with form value</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">cancel</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>
<p>Die <code>onSubmit()</code>-Funktion wird aufgerufen, wenn wir den <code>Update</code>-Button in unserem Formular klicken. Wir erweitern diese Klasse nun derart, dass die Daten aus dem Formular (<code>this.form.value</code>) an die Elternkomponente (<code>ReadComponent</code>) geleitet werden, damit sie von dort aus an das Backend für das <code>update</code> übertragen werden können. </p>
<p>Dazu erweitern wir zunächst <code>form.component.ts</code>:</p>
<div class="tabbed-set" data-tabs="32:1"><input checked="checked" id="__tabbed_32_1" name="__tabbed_32" type="radio" /><label for="__tabbed_32_1">src/app/members/read/form.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="hll"><span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Input</span><span class="p">,</span> <span class="nx">OnInit</span><span class="p">,</span> <span class="nx">Output</span><span class="p">,</span> <span class="nx">EventEmitter</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span class="kr">import</span> <span class="p">{</span><span class="nx">FormBuilder</span><span class="p">,</span> <span class="nx">FormGroup</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Data</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../../shared/data&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Location</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-form&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./form.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./form.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">FormComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="err">@</span><span class="nx">Input</span><span class="p">()</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">Data</span><span class="p">;</span>
<span class="hll">  <span class="err">@</span><span class="nx">Output</span><span class="p">()</span> <span class="nx">updateEvent</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventEmitter</span><span class="o">&lt;</span><span class="nx">Data</span><span class="o">&gt;</span><span class="p">();</span>
</span>  <span class="nx">form</span><span class="o">:</span> <span class="nx">FormGroup</span><span class="p">;</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">fb</span><span class="o">:</span> <span class="nx">FormBuilder</span><span class="p">,</span> <span class="kr">private</span> <span class="nx">location</span><span class="o">:</span> <span class="nx">Location</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">form</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">fb</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span>
      <span class="p">{</span>
        <span class="nx">idControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">firstNameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">lastNameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">emailControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
      <span class="p">}</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">patchValue</span><span class="p">({</span>
      <span class="nx">idControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
      <span class="nx">firstNameControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">firstname</span><span class="p">,</span>
      <span class="nx">lastNameControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">lastname</span><span class="p">,</span>
      <span class="nx">emailControl</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">email</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">onSubmit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
<span class="hll">    <span class="kr">const</span> <span class="nx">values</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">idControl</span><span class="p">;</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">firstname</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">firstNameControl</span><span class="p">;</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">lastname</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">lastNameControl</span><span class="p">;</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">email</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">emailControl</span><span class="p">;</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">updateEvent</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
</span>  <span class="p">}</span>

  <span class="nx">cancel</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>In Zeile <code>1</code> importieren wir nun auch noch <code>Output</code> und <code>EventEmitter</code>. Außerdem fügen wir in Zeile <code>13</code> eine weitere Eigenschaft <code>updateEvent</code> vom Typ <code>EventEmitter</code> hinzu. Diese dekorieren wir mit <code>@Output</code> und geben damit an, dass der Wert dieser Eigenschaft von der Kind- an die Elternkomponente übertragen wird. In Zeile <code>42</code> verwenden wir den <code>EventEmitter</code> <code>updateEvent</code> und rufen dafür die <code>emit()</code>-Funktion auf. Damit wird das Ereignis <code>updateEvent</code> ausgelöst. Wir übergeben diesem Ereignis <code>data</code> vom Typ <code>Data</code>. Die einzelnen Werte von <code>data</code> werden in den Zeilen <code>38-41</code> aus den Werten aus dem Formular (<code>values = form.value</code>) gesetzt. Weitere Informationen zu <code>EventEmitter</code> finden Sie <a href="https://angular.io/api/core/EventEmitter">hier</a>.  </p>
<p>In der Elternkomponente, der <code>ReadComponent</code> fügen wir zwei Sachen hinzu:</p>
<ul>
<li>in der <code>read.component.ts</code> wird die Ereignisbehandlung des <code>updateEvents</code> hinzugefügt und</li>
<li>in der <code>read.component.html</code> fügen wir ein <em>property bindung</em> zum Komponentenselektor der Kindkomponente hinzu</li>
</ul>
<div class="tabbed-set" data-tabs="33:2"><input checked="checked" id="__tabbed_33_1" name="__tabbed_33" type="radio" /><label for="__tabbed_33_1">src/app/members/read.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">BackendService</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../shared/backend.service&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Data</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../../shared/data&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">ActivatedRoute</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">HttpErrorResponse</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-read&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./read.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./read.component.css&#39;</span><span class="p">],</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">ReadComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">members</span><span class="o">:</span> <span class="nx">Data</span><span class="p">[];</span>
  <span class="nx">member</span><span class="o">:</span> <span class="nx">Data</span><span class="p">;</span>
  <span class="nx">selectedId</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>
  <span class="nx">error</span><span class="o">:</span> <span class="nx">HttpErrorResponse</span><span class="p">;</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">cs</span><span class="o">:</span> <span class="nx">BackendService</span><span class="p">,</span> <span class="kr">private</span> <span class="nx">route</span><span class="o">:</span> <span class="nx">ActivatedRoute</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">readAll</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;id = &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span><span class="p">);</span>   <span class="c1">// nur fuer debug</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">readOne</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">selectedId</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">trackByData</span><span class="p">(</span><span class="nx">index</span><span class="o">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">Data</span><span class="p">)</span><span class="o">:</span> <span class="nx">number</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span> <span class="p">}</span>

  <span class="nx">readAll</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cs</span><span class="p">.</span><span class="nx">getAll</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span><span class="nx">response</span><span class="o">:</span> <span class="nx">Data</span><span class="p">[])</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">members</span> <span class="o">=</span> <span class="nx">response</span><span class="p">,</span>
      <span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
      <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">readOne</span><span class="p">(</span><span class="nx">id</span><span class="o">:</span> <span class="nx">number</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cs</span><span class="p">.</span><span class="nx">getDataById</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span><span class="nx">response</span><span class="o">:</span> <span class="nx">Data</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">member</span> <span class="o">=</span> <span class="nx">response</span><span class="p">,</span>
      <span class="nx">error</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nx">error</span><span class="p">,</span>
    <span class="p">);</span>
  <span class="p">}</span>

<span class="hll">  <span class="nx">update</span><span class="p">(</span><span class="nx">data</span><span class="o">:</span> <span class="nx">Data</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">member</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">cs</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">);</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigateByUrl</span><span class="p">(</span><span class="s1">&#39;/read&#39;</span><span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span><span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
<input id="__tabbed_33_2" name="__tabbed_33" type="radio" /><label for="__tabbed_33_2">src/app/members/read.component.html</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;selectedId == 0&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>All members<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;table table-striped table-hover&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">caption</span><span class="p">&gt;</span>List of Members<span class="p">&lt;/</span><span class="nt">caption</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Nr.<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Vorname<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Nachname<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>E-Mail<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Edit<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot;let member of members; let i=index; trackBy: trackByData&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ i+1 }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{member.firstname}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{member.lastname}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{member.email}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">read</span><span class="err">/&#39;,</span> <span class="na">member</span><span class="err">.</span><span class="na">id</span><span class="err">]&quot;</span><span class="p">&gt;&lt;</span><span class="nt">i-bs</span>
        <span class="na">name</span><span class="o">=</span><span class="s">&quot;pencil-square&quot;</span>
        <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-secondary&quot;</span>
        <span class="na">width</span><span class="o">=</span><span class="s">&quot;1rem&quot;</span>
        <span class="na">height</span><span class="o">=</span><span class="s">&quot;1rem&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">i-bs</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;selectedId &gt; 0&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;error&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ selectedId }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ error?.message }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ error?.status }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">read</span><span class="err">&#39;]&quot;</span><span class="p">&gt;</span>Zurück zur Tabelle<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;member&quot;</span><span class="p">&gt;</span>
<span class="hll">    <span class="p">&lt;</span><span class="nt">app-form</span> <span class="err">[</span><span class="na">data</span><span class="err">]=&quot;</span><span class="na">member</span><span class="err">&quot;</span> <span class="err">(</span><span class="na">updateEvent</span><span class="err">)=&quot;</span><span class="na">update</span><span class="err">($</span><span class="na">event</span><span class="err">)&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">app-form</span><span class="p">&gt;</span>
</span>  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>In der <code>read.component.ts</code> wurde in den Zeilen <code>47-51</code> also einfach eine <code>update</code>-Funktion hinzugefügt, welche somit eine weitere Eigenschaft der TypeScript-Klasse der <code>ReadComponent</code> ist. In dieser Funktion wird zunächst die <code>update</code>-Funktion des <code>BackendService</code> aufgerufen (erstellen wir gleich) und danach die Route <code>/read</code> - also das Anzeigen aller Datensätze in der Tabelle. In der <code>read.component.html</code> wurde der Komponentenselektor <code>&lt;app-form&gt;&lt;/app-form&gt;</code> um ein weiteres Attribut erweitert. Nachdem wir dort bereits mithilfe der <em>property binding</em> <code>[data]="member"</code> den Datenfluss von der Eltern- auf die Kindkomponente spezifiziert hatten, kommt nun ein Ereignis-Attribut hinzu. Wir binden das <code>updateEvent</code> der Kindklasse an das <code>update</code>-Event der Elternklasse. Die generelle Syntax sieht so aus: 
Die generelle Syntax der <em>property binding</em> an den Kindselektoren sieht so aus:</p>
<blockquote>
<p><code>&lt;app-child&gt; (childEvent)="parentMethod($event)" &lt;/app-child&gt;</code></p>
</blockquote>
<p>wobei in der <code>child.component.ts</code> definiert sein muss:</p>
<blockquote>
<p><code>@Output() childEvent: EventEmitter;</code></p>
</blockquote>
<p>sowie die <code>parentMethod()</code> in der <code>parent.component.ts</code>. </p>
<p>Mithilfe der <em>Banana-Syntax</em> <code>[()]</code> können <code>@Input</code> und <code>@Output</code> übrigens kombiniert werden. Siehe dazu <a href="https://angular.io/guide/two-way-binding#two-way-binding"><em>two way binding</em></a>.</p>
<p>In der (Eltern-)Komponente <code>read.component.ts</code> kommen jetzt bei Klicken des Buttons <code>Update</code> die Werte aus dem Formular an. Diese werden nun verwendet, um die <code>update</code>-Funktion im Backend aufzurufen und den Datensatz zu aktualisieren. Dazu erweitern wir den <code>BackendService</code> um eine <code>update</code>-Funktion:</p>
<div class="tabbed-set" data-tabs="34:1"><input checked="checked" id="__tabbed_34_1" name="__tabbed_34" type="radio" /><label for="__tabbed_34_1">src/app/shared/backend.service.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Data</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./data&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span>
  <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">BackendService</span> <span class="p">{</span>
  <span class="nx">baseUrl</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:3000/members&#39;</span><span class="p">;</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">http</span><span class="o">:</span> <span class="nx">HttpClient</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">getAll</span><span class="p">()</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Data</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
      <span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Data</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">getDataById</span><span class="p">(</span><span class="nx">dataId</span><span class="o">:</span> <span class="nx">number</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Data</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
      <span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Data</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">dataId</span><span class="p">);</span>
  <span class="p">}</span>

<span class="hll">  <span class="nx">update</span><span class="p">(</span><span class="nx">dataId</span><span class="o">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">Data</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">put</span><span class="o">&lt;</span><span class="nx">Data</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">dataId</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
</span><span class="hll">      <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span>
</span><span class="hll">        <span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span class="hll">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
</span><span class="hll">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
</span><span class="hll">        <span class="p">},</span>
</span><span class="hll">        <span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span class="hll">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span><span class="hll">        <span class="p">}</span>
</span><span class="hll">      <span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

</div>
</div>
<p>Die <code>put</code>-Funktion des <code>HttpClient</code> (siehe z.B. <a href="https://angular.io/api/common/http/HttpClient#put">hier</a>) erzeugt ein <code>Observable</code>, das mithilfe der <code>subscribe()</code>-Funktion ausgeführt werden kann. <code>Subscribe()</code> hat zwei Parameter <code>next</code> und <code>error</code> und für beide kann eine <a href="../javascript/#callback-funktionen">Callback</a>-Funktion definert werden. Die hier definierten Funktionen geben nur entweder die <code>response</code> oder den <code>error</code> auf die Konsole aus. </p>
<p>Damit kann nun auch ein Datensatz geändert werden (<code>update</code>) - siehe <a href="../backend/#u-update">U - update</a> im Backend. Beachten Sie, dass wir hier weder eine Meldung des erfolgreichen Updates implementiert haben, noch eine eventuelle Fehlermeldung. Für beides wäre die <code>UpdateComponent</code> geeignet. Wir leiten aber direkt nach dem Update an die Tabelle aller Datensätze weiter. </p>
<h2 id="d-delete-one">D - delete one<a class="headerlink" href="#d-delete-one" title="Permanent link">&para;</a></h2>
<p>Um einen Datensatz zu löschen, könnten wir in der Übersicht aller Datensätze, also in der Tabelle unter der Route <code>/read</code> eine weitere Spalte mit einem entsprechenden Icon hinzufügen. </p>
<div class="highlight"><pre><span></span><code>ng add @ng-bootstrap/ng-bootstrap
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="">
        
          <a href="../backend/" title="REST-API" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Zurück
                </span>
                REST-API
              </div>
            </div>
          </a>
        
        
          <a href="../node/" title="Node.js" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Weiter
                </span>
                Node.js
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 Jörn Freiheit
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.c51dfa35.min.js"></script>
      <script src="../assets/javascripts/bundle.eaaa3931.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "In Zwischenablage kopieren", "clipboard.copied": "In Zwischenablage kopiert", "search.config.lang": "de", "search.config.pipeline": "", "search.config.separator": "", "search.result.placeholder": "Suchbegriff eingeben", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ["instant", "tabs"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.58d22e8e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>